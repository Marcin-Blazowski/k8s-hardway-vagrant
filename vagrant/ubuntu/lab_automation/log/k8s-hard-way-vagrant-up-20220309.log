Bringing machine 'master-1' up with 'virtualbox' provider...
Bringing machine 'master-2' up with 'virtualbox' provider...
Bringing machine 'loadbalancer' up with 'virtualbox' provider...
Bringing machine 'worker-1' up with 'virtualbox' provider...
Bringing machine 'worker-2' up with 'virtualbox' provider...
==> master-1: Importing base box 'ubuntu/bionic64'...
[K==> master-1: Matching MAC address for NAT networking...
==> master-1: Setting the name of the VM: k8s-ha-master-1
==> master-1: Clearing any previously set network interfaces...
==> master-1: Preparing network interfaces based on configuration...
    master-1: Adapter 1: nat
    master-1: Adapter 2: hostonly
==> master-1: Forwarding ports...
    master-1: 22 (guest) => 2711 (host) (adapter 1)
    master-1: 22 (guest) => 2222 (host) (adapter 1)
==> master-1: Running 'pre-boot' VM customizations...
==> master-1: Booting VM...
==> master-1: Waiting for machine to boot. This may take a few minutes...
    master-1: SSH address: 127.0.0.1:2222
    master-1: SSH username: vagrant
    master-1: SSH auth method: private key
    master-1: Warning: Connection reset. Retrying...
    master-1: Warning: Connection aborted. Retrying...
    master-1: 
    master-1: Vagrant insecure key detected. Vagrant will automatically replace
    master-1: this with a newly generated keypair for better security.
    master-1: 
    master-1: Inserting generated public key within guest...
    master-1: Removing insecure key from the guest if it's present...
    master-1: Key inserted! Disconnecting and reconnecting using new SSH key...
==> master-1: Machine booted and ready!
==> master-1: Checking for guest additions in VM...
    master-1: The guest additions on this VM do not match the installed version of
    master-1: VirtualBox! In most cases this is fine, but in rare cases it can
    master-1: prevent things such as shared folders from working properly. If you see
    master-1: shared folder errors, please make sure the guest additions within the
    master-1: virtual machine match the version of VirtualBox you have installed on
    master-1: your host and reload your VM.
    master-1: 
    master-1: Guest Additions Version: 5.2.42
    master-1: VirtualBox Version: 6.1
==> master-1: Setting hostname...
==> master-1: Configuring and enabling network interfaces...
==> master-1: Mounting shared folders...
    master-1: /vagrant => C:/Users/MarcinBlazowski/Documents/Projects/k8s-hard-way/vagrant
==> master-1: Running provisioner: setup-hosts (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-cec0i6.sh
==> master-1: Running provisioner: setup-dns (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-7gm3ak.sh
==> master-1: Running provisioner: file...
    master-1: ./ubuntu/cert_verify.sh => $HOME/
==> master-1: Running provisioner: grant-ssh (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1eu17s3.sh
==> master-1: Running provisioner: install-kubectl (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1273mie.sh
    master-1: Downloading kubectl ...
    master-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-1:                                  Dload  Upload   Total   Spent    Left  Speed
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    367      0 --:--:-- --:--:-- --:--:--   367
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  9 44.4M    9 4206k    0     0  1858k      0  0:00:24  0:00:02  0:00:22 2571k  9 44.4M    9 4510k    0     0  1627k      0  0:00:27  0:00:02  0:00:25 2103k 19 44.4M   19 8718k    0     0  2428k      0  0:00:18  0:00:03  0:00:15 2941k 30 44.4M   30 13.4M    0     0  2993k      0  0:00:15  0:00:04  0:00:11 3466k 40 44.4M   40 18.0M    0     0  3302k      0  0:00:13  0:00:05  0:00:08 3719k 50 44.4M   50 22.6M    0     0  3519k      0  0:00:12  0:00:06  0:00:06 4388k 62 44.4M   62 27.9M    0     0  3768k      0  0:00:12  0:00:07  0:00:05 4998k 73 44.4M   73 32.5M    0     0  3879k      0  0:00:11  0:00:08  0:00:03 4921k 85 44.4M   85 37.8M    0     0  4039k      0  0:00:11  0:00:09  0:00:02 4998k 96 44.4M   96 43.0M    0     0  4165k      0  0:00:10  0:00:10 --:--:-- 5129k100 44.4M  100 44.4M    0     0  4193k      0  0:00:10  0:00:10 --:--:-- 5237k
==> master-1: Running provisioner: create-CA (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1dh9to9.sh
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: .........................................+++++
    master-1: ...........................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = KUBERNETES-CA
    master-1: Getting Private key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: ..........+++++
    master-1: .................................................................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = admin, O = system:masters
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: .........+++++
    master-1: ............................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = system:kube-controller-manager
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: .......+++++
    master-1: .................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = system:kube-proxy
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: ......................................................................................+++++
    master-1: ..............................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = system:kube-scheduler
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: ............................+++++
    master-1: .....................................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = kube-apiserver
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: ................................+++++
    master-1: ..........................................................................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = etcd-server
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: .+++++
    master-1: ..........+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = service-accounts
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: ................+++++
    master-1: ..........+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = system:node:worker-1, O = system:nodes
    master-1: Getting CA Private Key
    master-1: Generating RSA private key, 2048 bit long modulus (2 primes)
    master-1: .....................+++++
    master-1: ..............................+++++
    master-1: e is 65537 (0x010001)
    master-1: Signature ok
    master-1: subject=CN = system:node:worker-2, O = system:nodes
    master-1: Getting CA Private Key
==> master-1: Running provisioner: create-kube-configs (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-8ju6o.sh
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "system:kube-proxy" set.
    master-1: Context "default" created.
    master-1: Switched to context "default".
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "system:kube-controller-manager" set.
    master-1: Context "default" created.
    master-1: Switched to context "default".
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "system:kube-scheduler" set.
    master-1: Context "default" created.
    master-1: Switched to context "default".
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "admin" set.
    master-1: Context "default" created.
    master-1: Switched to context "default".
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "system:node:worker-1" set.
    master-1: Context "default" created.
    master-1: Switched to context "default".
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "system:node:worker-2" set.
    master-1: Context "default" created.
    master-1: Switched to context "default".
==> master-1: Running provisioner: create-encryption-config (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1im4svr.sh
==> master-1: Running provisioner: etcd_bootstrap (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-gjaph.sh
    master-1: v3.5.2
    master-1: Downloading ETCD v3.5.2 ...
    master-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-1:                                  Dload  Upload   Total   Spent    Left  Speed
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   667  100   667    0     0   1372      0 --:--:-- --:--:-- --:--:--  1372
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 18.5M    0 97674    0     0  58104      0  0:05:33  0:00:01  0:05:32  103k 16 18.5M   16 3199k    0     0  1214k      0  0:00:15  0:00:02  0:00:13 1701k 47 18.5M   47 9064k    0     0  2506k      0  0:00:07  0:00:03  0:00:04 3168k 76 18.5M   76 14.1M    0     0  3136k      0  0:00:06  0:00:04  0:00:02 3749k100 18.5M  100 18.5M    0     0  3483k      0  0:00:05  0:00:05 --:--:-- 4046k
    master-1: etcd-v3.5.2-linux-amd64/
    master-1: etcd-v3.5.2-linux-amd64/etcdutl
    master-1: etcd-v3.5.2-linux-amd64/Documentation/
    master-1: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/
    master-1: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/
    master-1: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/
    master-1: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/v3election.swagger.json
    master-1: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/v3lock.swagger.json
    master-1: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/rpc.swagger.json
    master-1: etcd-v3.5.2-linux-amd64/Documentation/README.md
    master-1: etcd-v3.5.2-linux-amd64/README-etcdutl.md
    master-1: etcd-v3.5.2-linux-amd64/README-etcdctl.md
    master-1: etcd-v3.5.2-linux-amd64/etcdctl
    master-1: etcd-v3.5.2-linux-amd64/etcd
    master-1: etcd-v3.5.2-linux-amd64/READMEv2-etcdctl.md
    master-1: etcd-v3.5.2-linux-amd64/README.md
    master-1: [Unit]
    master-1: Description=etcd
    master-1: Documentation=https://github.com/coreos
    master-1: 
    master-1: [Service]
    master-1: ExecStart=/usr/local/bin/etcd \
    master-1:   --name master-1 \
    master-1:   --cert-file=/etc/etcd/etcd-server.crt \
    master-1:   --key-file=/etc/etcd/etcd-server.key \
    master-1:   --peer-cert-file=/etc/etcd/etcd-server.crt \
    master-1:   --peer-key-file=/etc/etcd/etcd-server.key \
    master-1:   --trusted-ca-file=/etc/etcd/ca.crt \
    master-1:   --peer-trusted-ca-file=/etc/etcd/ca.crt \
    master-1:   --peer-client-cert-auth \
    master-1:   --client-cert-auth \
    master-1:   --initial-advertise-peer-urls https://192.168.5.11:2380 \
    master-1:   --listen-peer-urls https://192.168.5.11:2380 \
    master-1:   --listen-client-urls https://192.168.5.11:2379,https://127.0.0.1:2379 \
    master-1:   --advertise-client-urls https://192.168.5.11:2379 \
    master-1:   --initial-cluster-token etcd-cluster-0 \
    master-1:   --initial-cluster master-1=https://192.168.5.11:2380,master-2=https://192.168.5.12:2380 \
    master-1:   --initial-cluster-state new \
    master-1:   --data-dir=/var/lib/etcd
    master-1: Restart=on-failure
    master-1: RestartSec=5
    master-1: 
    master-1: [Install]
    master-1: WantedBy=multi-user.target
    master-1: Created symlink /etc/systemd/system/multi-user.target.wants/etcd.service → /etc/systemd/system/etcd.service.
==> master-1: Running provisioner: control_plane_bootstrap (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-3l2pp5.sh
    master-1: Downloading kube-apiserver ...
    master-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-1:                                  Dload  Upload   Total   Spent    Left  Speed
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    751      0 --:--:-- --:--:-- --:--:--   747100   154  100   154    0     0    751      0 --:--:-- --:--:-- --:--:--   747
    master-1:   2  125M    2 3326k    0     0  2910k      0  0:00:44  0:00:01  0:00:43 2910k  6  125M    6 8734k    0     0  4072k      0  0:00:31  0:00:02  0:00:29 5397k 11  125M   11 13.7M    0     0  4494k      0  0:00:28  0:00:03  0:00:25 5400k 15  125M   15 19.0M    0     0  4716k      0  0:00:27  0:00:04  0:00:23 5402k 19  125M   19 24.3M    0     0  4852k      0  0:00:26  0:00:05  0:00:21 5408k 23  125M   23 28.9M    0     0  4831k      0  0:00:26  0:00:06  0:00:20 5270k 27  125M   27 34.2M    0     0  4914k      0  0:00:26  0:00:07  0:00:19 5275k 31  125M   31 39.5M    0     0  4976k      0  0:00:25  0:00:08  0:00:17 5280k 35  125M   35 44.8M    0     0  5023k      0  0:00:25  0:00:09  0:00:16 5278k 40  125M   40 50.7M    0     0  5018k      0  0:00:25  0:00:10  0:00:15 5182k 43  125M   43 54.9M    0     0  5052k      0  0:00:25  0:00:11  0:00:14 5324k 47  125M   47 60.0M    0     0  5062k      0  0:00:25  0:00:12  0:00:13 5273k 52  125M   52 65.3M    0     0  5089k      0  0:00:25  0:00:13  0:00:12 5273k 56  125M   56 70.6M    0     0  5113k      0  0:00:25  0:00:14  0:00:11 5276k 60  125M   60 75.9M    0     0  5133k      0  0:00:24  0:00:15  0:00:09 5380k 64  125M   64 81.2M    0     0  5150k      0  0:00:24  0:00:16  0:00:08 5369k 68  125M   68 85.7M    0     0  5124k      0  0:00:25  0:00:17  0:00:08 5276k 72  125M   72 91.0M    0     0  5140k      0  0:00:24  0:00:18  0:00:06 5273k 76  125M   76 96.3M    0     0  5155k      0  0:00:24  0:00:19  0:00:05 5273k 81  125M   81  101M    0     0  5168k      0  0:00:24  0:00:20  0:00:04 5274k 85  125M   85  106M    0     0  5180k      0  0:00:24  0:00:21  0:00:03 5273k 89  125M   89  111M    0     0  5158k      0  0:00:24  0:00:22  0:00:02 5273k 93  125M   93  116M    0     0  5169k      0  0:00:24  0:00:23  0:00:01 5276k 97  125M   97  122M    0     0  5180k      0  0:00:24  0:00:24 --:--:-- 5276k100  125M  100  125M    0     0  5186k      0  0:00:24  0:00:24 --:--:-- 5263k
    master-1: Downloading kube-controller-manager ...
    master-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-1:                                  Dload  Upload   Total   Spent    Left  Speed
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    736      0 --:--:-- --:--:-- --:--:--   736
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  3  115M    3 4670k    0     0  3314k      0  0:00:35  0:00:01  0:00:34 5189k  8  115M    8  9.8M    0     0  4190k      0  0:00:28  0:00:02  0:00:26 5315k 13  115M   13 15.1M    0     0  4553k      0  0:00:25  0:00:03  0:00:22 5353k 17  115M   17 20.4M    0     0  4742k      0  0:00:24  0:00:04  0:00:20 5363k 22  115M   22 25.7M    0     0  4868k      0  0:00:24  0:00:05  0:00:19 5375k 26  115M   26 30.3M    0     0  4845k      0  0:00:24  0:00:06  0:00:18 5276k 30  115M   30 35.6M    0     0  4921k      0  0:00:24  0:00:07  0:00:17 5273k 35  115M   35 40.9M    0     0  4981k      0  0:00:23  0:00:08  0:00:15 5273k 39  115M   39 46.1M    0     0  5027k      0  0:00:23  0:00:09  0:00:14 5276k 44  115M   44 51.4M    0     0  5064k      0  0:00:23  0:00:10  0:00:13 5276k 48  115M   48 56.0M    0     0  5028k      0  0:00:23  0:00:11  0:00:12 5263k 53  115M   53 61.2M    0     0  5058k      0  0:00:23  0:00:12  0:00:11 5260k 57  115M   57 66.5M    0     0  5083k      0  0:00:23  0:00:13  0:00:10 5256k 62  115M   62 71.8M    0     0  5105k      0  0:00:23  0:00:14  0:00:09 5254k 66  115M   66 77.1M    0     0  5126k      0  0:00:23  0:00:15  0:00:08 5254k 70  115M   70 81.6M    0     0  5092k      0  0:00:23  0:00:16  0:00:07 5238k 75  115M   75 86.9M    0     0  5112k      0  0:00:23  0:00:17  0:00:06 5244k 79  115M   79 92.1M    0     0  5127k      0  0:00:23  0:00:18  0:00:05 5246k 84  115M   84 97.4M    0     0  5143k      0  0:00:22  0:00:19  0:00:03 5251k 88  115M   88  102M    0     0  5156k      0  0:00:22  0:00:20  0:00:02 5251k 93  115M   93  107M    0     0  5153k      0  0:00:22  0:00:21  0:00:01 5353k 97  115M   97  112M    0     0  5148k      0  0:00:22  0:00:22 --:--:-- 5276k100  115M  100  115M    0     0  5155k      0  0:00:22  0:00:22 --:--:-- 5267k
    master-1: Downloading kube-scheduler ...
    master-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-1:                                  Dload  Upload   Total   Spent    Left  Speed
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    723      0 --:--:-- --:--:-- --:--:--   723
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  6 47.3M    6 3198k    0     0  2193k      0  0:00:22  0:00:01  0:00:21 3307k 17 47.3M   17 8622k    0     0  3508k      0  0:00:13  0:00:02  0:00:11 4383k 28 47.3M   28 13.7M    0     0  4058k      0  0:00:11  0:00:03  0:00:08 4730k 40 47.3M   40 18.9M    0     0  4364k      0  0:00:11  0:00:04  0:00:07 4905k 51 47.3M   51 24.2M    0     0  4558k      0  0:00:10  0:00:05  0:00:05 5008k 61 47.3M   61 28.9M    0     0  4586k      0  0:00:10  0:00:06  0:00:04 5283k 72 47.3M   72 34.2M    0     0  4696k      0  0:00:10  0:00:07  0:00:03 5280k 83 47.3M   83 39.4M    0     0  4782k      0  0:00:10  0:00:08  0:00:02 5283k 94 47.3M   94 44.7M    0     0  4849k      0  0:00:09  0:00:09 --:--:-- 5281k100 47.3M  100 47.3M    0     0  4877k      0  0:00:09  0:00:09 --:--:-- 5266k
    master-1: Downloading kubectl ...
    master-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-1:                                  Dload  Upload   Total   Spent    Left  Speed
    master-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    652      0 --:--:-- --:--:-- --:--:--   652
    master-1:   0 44.4M    0  4185    0     0   8254      0  1:34:04 --:--:--  1:34:04  8254 10 44.4M   10 4782k    0     0  3197k      0  0:00:14  0:00:01  0:00:13 4831k 22 44.4M   22  9.9M    0     0  4086k      0  0:00:11  0:00:02  0:00:09 5124k 34 44.4M   34 15.2M    0     0  4469k      0  0:00:10  0:00:03  0:00:07 5224k 46 44.4M   46 20.5M    0     0  4677k      0  0:00:09  0:00:04  0:00:05 5270k 58 44.4M   58 25.8M    0     0  4813k      0  0:00:09  0:00:05  0:00:04 5301k 68 44.4M   68 30.4M    0     0  4796k      0  0:00:09  0:00:06  0:00:03 5275k 80 44.4M   80 35.7M    0     0  4878k      0  0:00:09  0:00:07  0:00:02 5273k 92 44.4M   92 40.9M    0     0  4942k      0  0:00:09  0:00:08  0:00:01 5273k100 44.4M  100 44.4M    0     0  4977k      0  0:00:09  0:00:09 --:--:-- 5267k
    master-1: [Unit]
    master-1: Description=Kubernetes API Server
    master-1: Documentation=https://github.com/kubernetes/kubernetes
    master-1: 
    master-1: [Service]
    master-1: ExecStart=/usr/local/bin/kube-apiserver \
    master-1:   --advertise-address=192.168.5.11 \
    master-1:   --allow-privileged=true \
    master-1:   --apiserver-count=2 \
    master-1:   --audit-log-maxage=30 \
    master-1:   --audit-log-maxbackup=3 \
    master-1:   --audit-log-maxsize=100 \
    master-1:   --audit-log-path=/var/log/audit.log \
    master-1:   --authorization-mode=Node,RBAC \
    master-1:   --bind-address=0.0.0.0 \
    master-1:   --client-ca-file=/var/lib/kubernetes/ca.crt \
    master-1:   --enable-admission-plugins=NodeRestriction,ServiceAccount \
    master-1:   --enable-swagger-ui=true \
    master-1:   --enable-bootstrap-token-auth=true \
    master-1:   --etcd-cafile=/var/lib/kubernetes/ca.crt \
    master-1:   --etcd-certfile=/var/lib/kubernetes/etcd-server.crt \
    master-1:   --etcd-keyfile=/var/lib/kubernetes/etcd-server.key \
    master-1:   --etcd-servers=https://192.168.5.11:2379,https://192.168.5.12:2379 \
    master-1:   --event-ttl=1h \
    master-1:   --encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \
    master-1:   --kubelet-certificate-authority=/var/lib/kubernetes/ca.crt \
    master-1:   --kubelet-client-certificate=/var/lib/kubernetes/kube-apiserver.crt \
    master-1:   --kubelet-client-key=/var/lib/kubernetes/kube-apiserver.key \
    master-1:   --runtime-config=api/all=true \
    master-1:   --service-account-key-file=/var/lib/kubernetes/service-account.crt \
    master-1:   --service-account-signing-key-file=/var/lib/kubernetes/service-account.key \
    master-1:   --service-account-issuer=kubernetes \
    master-1:   --service-cluster-ip-range=10.96.0.0/24 \
    master-1:   --service-node-port-range=30000-32767 \
    master-1:   --tls-cert-file=/var/lib/kubernetes/kube-apiserver.crt \
    master-1:   --tls-private-key-file=/var/lib/kubernetes/kube-apiserver.key \
    master-1:   --v=2
    master-1: Restart=on-failure
    master-1: RestartSec=5
    master-1: 
    master-1: [Install]
    master-1: WantedBy=multi-user.target
    master-1: [Unit]
    master-1: Description=Kubernetes Controller Manager
    master-1: Documentation=https://github.com/kubernetes/kubernetes
    master-1: 
    master-1: [Service]
    master-1: ExecStart=/usr/local/bin/kube-controller-manager \
    master-1:   --address=0.0.0.0 \
    master-1:   --cluster-cidr=192.168.5.0/24 \
    master-1:   --cluster-name=kubernetes \
    master-1:   --cluster-signing-cert-file=/var/lib/kubernetes/ca.crt \
    master-1:   --cluster-signing-key-file=/var/lib/kubernetes/ca.key \
    master-1:   --kubeconfig=/var/lib/kubernetes/kube-controller-manager.kubeconfig \
    master-1:   --leader-elect=true \
    master-1:   --root-ca-file=/var/lib/kubernetes/ca.crt \
    master-1:   --service-account-private-key-file=/var/lib/kubernetes/service-account.key \
    master-1:   --service-cluster-ip-range=10.96.0.0/24 \
    master-1:   --use-service-account-credentials=true \
    master-1:   --v=2
    master-1: Restart=on-failure
    master-1: RestartSec=5
    master-1: 
    master-1: [Install]
    master-1: WantedBy=multi-user.target
    master-1: [Unit]
    master-1: Description=Kubernetes Scheduler
    master-1: Documentation=https://github.com/kubernetes/kubernetes
    master-1: 
    master-1: [Service]
    master-1: ExecStart=/usr/local/bin/kube-scheduler \
    master-1:   --kubeconfig=/var/lib/kubernetes/kube-scheduler.kubeconfig \
    master-1:   --address=127.0.0.1 \
    master-1:   --leader-elect=true \
    master-1:   --v=2
    master-1: Restart=on-failure
    master-1: RestartSec=5
    master-1: 
    master-1: [Install]
    master-1: WantedBy=multi-user.target
    master-1: Created symlink /etc/systemd/system/multi-user.target.wants/kube-apiserver.service → /etc/systemd/system/kube-apiserver.service.
    master-1: Created symlink /etc/systemd/system/multi-user.target.wants/kube-controller-manager.service → /etc/systemd/system/kube-controller-manager.service.
    master-1: Created symlink /etc/systemd/system/multi-user.target.wants/kube-scheduler.service → /etc/systemd/system/kube-scheduler.service.
==> master-1: Running provisioner: configure_admin_kubectl (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-f92je0.sh
    master-1: Cluster "kubernetes-the-hard-way" set.
    master-1: User "admin" set.
    master-1: Context "kubernetes-the-hard-way" created.
    master-1: Switched to context "kubernetes-the-hard-way".
==> master-1: Running provisioner: tls_master_config (shell)...
    master-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1wajrza.sh
    master-1: This is not master-2. Exiting.
==> master-2: Importing base box 'ubuntu/bionic64'...
[K==> master-2: Matching MAC address for NAT networking...
==> master-2: Setting the name of the VM: k8s-ha-master-2
==> master-2: Fixed port collision for 22 => 2222. Now on port 2200.
==> master-2: Clearing any previously set network interfaces...
==> master-2: Preparing network interfaces based on configuration...
    master-2: Adapter 1: nat
    master-2: Adapter 2: hostonly
==> master-2: Forwarding ports...
    master-2: 22 (guest) => 2712 (host) (adapter 1)
    master-2: 22 (guest) => 2200 (host) (adapter 1)
==> master-2: Running 'pre-boot' VM customizations...
==> master-2: Booting VM...
==> master-2: Waiting for machine to boot. This may take a few minutes...
    master-2: SSH address: 127.0.0.1:2200
    master-2: SSH username: vagrant
    master-2: SSH auth method: private key
    master-2: Warning: Connection reset. Retrying...
    master-2: Warning: Connection aborted. Retrying...
    master-2: 
    master-2: Vagrant insecure key detected. Vagrant will automatically replace
    master-2: this with a newly generated keypair for better security.
    master-2: 
    master-2: Inserting generated public key within guest...
    master-2: Removing insecure key from the guest if it's present...
    master-2: Key inserted! Disconnecting and reconnecting using new SSH key...
==> master-2: Machine booted and ready!
==> master-2: Checking for guest additions in VM...
    master-2: The guest additions on this VM do not match the installed version of
    master-2: VirtualBox! In most cases this is fine, but in rare cases it can
    master-2: prevent things such as shared folders from working properly. If you see
    master-2: shared folder errors, please make sure the guest additions within the
    master-2: virtual machine match the version of VirtualBox you have installed on
    master-2: your host and reload your VM.
    master-2: 
    master-2: Guest Additions Version: 5.2.42
    master-2: VirtualBox Version: 6.1
==> master-2: Setting hostname...
==> master-2: Configuring and enabling network interfaces...
==> master-2: Mounting shared folders...
    master-2: /vagrant => C:/Users/MarcinBlazowski/Documents/Projects/k8s-hard-way/vagrant
==> master-2: Running provisioner: setup-hosts (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1ff8s58.sh
==> master-2: Running provisioner: setup-dns (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-bbsewn.sh
==> master-2: Running provisioner: file...
    master-2: ./ubuntu/cert_verify.sh => $HOME/
==> master-2: Running provisioner: grant-ssh (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-8a2j9.sh
==> master-2: Running provisioner: install-kubectl (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1me5dk7.sh
    master-2: Downloading kubectl ...
    master-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-2:                                  Dload  Upload   Total   Spent    Left  Speed
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    357      0 --:--:-- --:--:-- --:--:--   356100   154  100   154    0     0    357      0 --:--:-- --:--:-- --:--:--   356
    master-2:   3 44.4M    3 1550k    0     0  1129k      0  0:00:40  0:00:01  0:00:39 1129k 15 44.4M   15 6974k    0     0  2960k      0  0:00:15  0:00:02  0:00:13 5517k 26 44.4M   26 11.9M    0     0  3646k      0  0:00:12  0:00:03  0:00:09 5387k 38 44.4M   38 17.2M    0     0  4055k      0  0:00:11  0:00:04  0:00:07 5401k 50 44.4M   50 22.5M    0     0  4308k      0  0:00:10  0:00:05  0:00:05 5402k 61 44.4M   61 27.1M    0     0  4373k      0  0:00:10  0:00:06  0:00:04 5265k 72 44.4M   72 32.4M    0     0  4515k      0  0:00:10  0:00:07  0:00:03 5248k 84 44.4M   84 37.7M    0     0  4622k      0  0:00:09  0:00:08  0:00:01 5276k 96 44.4M   96 43.0M    0     0  4707k      0  0:00:09  0:00:09 --:--:-- 5276k100 44.4M  100 44.4M    0     0  4728k      0  0:00:09  0:00:09 --:--:-- 5257k
==> master-2: Running provisioner: create-CA (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1cg6pes.sh
==> master-2: Running provisioner: create-kube-configs (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1a6ytvu.sh
==> master-2: Running provisioner: create-encryption-config (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-3vdm3h.sh
==> master-2: Running provisioner: etcd_bootstrap (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-as7wnc.sh
    master-2: v3.5.2
    master-2: Downloading ETCD v3.5.2 ...
    master-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-2:                                  Dload  Upload   Total   Spent    Left  Speed
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   667  100   667    0     0   1347      0 --:--:-- --:--:-- --:--:--  1344
    master-2:  17 18.5M   17 3383k    0     0  2333k      0  0:00:08  0:00:01  0:00:07 2333k 46 18.5M   46 8807k    0     0  3594k      0  0:00:05  0:00:02  0:00:03 5423k 75 18.5M   75 13.8M    0     0  4125k      0  0:00:04  0:00:03  0:00:01 5424k100 18.5M  100 18.5M    0     0  4386k      0  0:00:04  0:00:04 --:--:-- 5423k
    master-2: etcd-v3.5.2-linux-amd64/
    master-2: etcd-v3.5.2-linux-amd64/etcdutl
    master-2: etcd-v3.5.2-linux-amd64/Documentation/
    master-2: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/
    master-2: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/
    master-2: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/
    master-2: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/v3election.swagger.json
    master-2: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/v3lock.swagger.json
    master-2: etcd-v3.5.2-linux-amd64/Documentation/dev-guide/apispec/swagger/rpc.swagger.json
    master-2: etcd-v3.5.2-linux-amd64/Documentation/README.md
    master-2: etcd-v3.5.2-linux-amd64/README-etcdutl.md
    master-2: etcd-v3.5.2-linux-amd64/README-etcdctl.md
    master-2: etcd-v3.5.2-linux-amd64/etcdctl
    master-2: etcd-v3.5.2-linux-amd64/etcd
    master-2: etcd-v3.5.2-linux-amd64/READMEv2-etcdctl.md
    master-2: etcd-v3.5.2-linux-amd64/README.md
    master-2: [Unit]
    master-2: Description=etcd
    master-2: Documentation=https://github.com/coreos
    master-2: 
    master-2: [Service]
    master-2: ExecStart=/usr/local/bin/etcd \
    master-2:   --name master-2 \
    master-2:   --cert-file=/etc/etcd/etcd-server.crt \
    master-2:   --key-file=/etc/etcd/etcd-server.key \
    master-2:   --peer-cert-file=/etc/etcd/etcd-server.crt \
    master-2:   --peer-key-file=/etc/etcd/etcd-server.key \
    master-2:   --trusted-ca-file=/etc/etcd/ca.crt \
    master-2:   --peer-trusted-ca-file=/etc/etcd/ca.crt \
    master-2:   --peer-client-cert-auth \
    master-2:   --client-cert-auth \
    master-2:   --initial-advertise-peer-urls https://192.168.5.12:2380 \
    master-2:   --listen-peer-urls https://192.168.5.12:2380 \
    master-2:   --listen-client-urls https://192.168.5.12:2379,https://127.0.0.1:2379 \
    master-2:   --advertise-client-urls https://192.168.5.12:2379 \
    master-2:   --initial-cluster-token etcd-cluster-0 \
    master-2:   --initial-cluster master-1=https://192.168.5.11:2380,master-2=https://192.168.5.12:2380 \
    master-2:   --initial-cluster-state new \
    master-2:   --data-dir=/var/lib/etcd
    master-2: Restart=on-failure
    master-2: RestartSec=5
    master-2: 
    master-2: [Install]
    master-2: WantedBy=multi-user.target
    master-2: Created symlink /etc/systemd/system/multi-user.target.wants/etcd.service → /etc/systemd/system/etcd.service.
==> master-2: Running provisioner: control_plane_bootstrap (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-e7i3da.sh
    master-2: Downloading kube-apiserver ...
    master-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-2:                                  Dload  Upload   Total   Spent    Left  Speed
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    681      0 --:--:-- --:--:-- --:--:--   684
    master-2:   0  125M    0  302k    0     0   536k      0  0:03:58 --:--:--  0:03:58  536k  4  125M    4 5694k    0     0  3641k      0  0:00:35  0:00:01  0:00:34 5391k  8  125M    8 10.8M    0     0  4336k      0  0:00:29  0:00:02  0:00:27 5408k 12  125M   12 16.1M    0     0  4641k      0  0:00:27  0:00:03  0:00:24 5413k 17  125M   17 21.4M    0     0  4814k      0  0:00:26  0:00:04  0:00:22 5416k 21  125M   21 26.6M    0     0  4904k      0  0:00:26  0:00:05  0:00:21 5397k 25  125M   25 31.3M    0     0  4890k      0  0:00:26  0:00:06  0:00:20 5280k 29  125M   29 36.6M    0     0  4960k      0  0:00:25  0:00:07  0:00:18 5280k 33  125M   33 41.9M    0     0  5014k      0  0:00:25  0:00:08  0:00:17 5280k 37  125M   37 47.2M    0     0  5055k      0  0:00:25  0:00:09  0:00:16 5276k 41  125M   41 52.5M    0     0  5090k      0  0:00:25  0:00:10  0:00:15 5297k 45  125M   45 57.1M    0     0  5056k      0  0:00:25  0:00:11  0:00:14 5276k 49  125M   49 62.4M    0     0  5086k      0  0:00:25  0:00:12  0:00:13 5276k 54  125M   54 67.7M    0     0  5111k      0  0:00:25  0:00:13  0:00:12 5276k 58  125M   58 72.9M    0     0  5131k      0  0:00:24  0:00:14  0:00:10 5276k 62  125M   62 78.2M    0     0  5150k      0  0:00:24  0:00:15  0:00:09 5276k 66  125M   66 82.8M    0     0  5123k      0  0:00:25  0:00:16  0:00:09 5276k 70  125M   70 88.1M    0     0  5140k      0  0:00:24  0:00:17  0:00:07 5276k 74  125M   74 93.4M    0     0  5155k      0  0:00:24  0:00:18  0:00:06 5276k 78  125M   78 98.7M    0     0  5168k      0  0:00:24  0:00:19  0:00:05 5276k 83  125M   83  104M    0     0  5181k      0  0:00:24  0:00:20  0:00:04 5276k 86  125M   86  108M    0     0  5158k      0  0:00:24  0:00:21  0:00:03 5276k 90  125M   90  113M    0     0  5170k      0  0:00:24  0:00:22  0:00:02 5276k 95  125M   95  119M    0     0  5180k      0  0:00:24  0:00:23  0:00:01 5273k 99  125M   99  124M    0     0  5190k      0  0:00:24  0:00:24 --:--:-- 5277k100  125M  100  125M    0     0  5192k      0  0:00:24  0:00:24 --:--:-- 5247k
    master-2: Downloading kube-controller-manager ...
    master-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-2:                                  Dload  Upload   Total   Spent    Left  Speed
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    693      0 --:--:-- --:--:-- --:--:--   693
    master-2:   1  115M    1 1854k    0     0  2179k      0  0:00:54 --:--:--  0:00:54 2179k  6  115M    6 7278k    0     0  3930k      0  0:00:30  0:00:01  0:00:29 5424k 10  115M   10 12.4M    0     0  4453k      0  0:00:26  0:00:02  0:00:24 5424k 15  115M   15 17.6M    0     0  4701k      0  0:00:25  0:00:03  0:00:22 5418k 19  115M   19 22.9M    0     0  4850k      0  0:00:24  0:00:04  0:00:20 5420k 23  115M   23 27.5M    0     0  4825k      0  0:00:24  0:00:05  0:00:19 5276k 28  115M   28 32.8M    0     0  4912k      0  0:00:24  0:00:06  0:00:18 5276k 33  115M   33 38.1M    0     0  4975k      0  0:00:23  0:00:07  0:00:16 5273k 37  115M   37 43.4M    0     0  5027k      0  0:00:23  0:00:08  0:00:15 5276k 42  115M   42 48.7M    0     0  5067k      0  0:00:23  0:00:09  0:00:14 5276k 46  115M   46 53.8M    0     0  5081k      0  0:00:23  0:00:10  0:00:13 5382k 50  115M   50 58.6M    0     0  5066k      0  0:00:23  0:00:11  0:00:12 5276k 55  115M   55 63.9M    0     0  5093k      0  0:00:23  0:00:12  0:00:11 5276k 59  115M   59 69.2M    0     0  5116k      0  0:00:23  0:00:13  0:00:10 5274k 64  115M   64 74.5M    0     0  5137k      0  0:00:23  0:00:14  0:00:09 5276k 69  115M   69 79.7M    0     0  5152k      0  0:00:22  0:00:15  0:00:07 5306k 73  115M   73 84.4M    0     0  5128k      0  0:00:23  0:00:16  0:00:07 5276k 77  115M   77 89.6M    0     0  5144k      0  0:00:22  0:00:17  0:00:05 5276k 82  115M   82 94.8M    0     0  5152k      0  0:00:22  0:00:18  0:00:04 5253k 86  115M   86  100M    0     0  5165k      0  0:00:22  0:00:19  0:00:03 5248k 91  115M   91  105M    0     0  5176k      0  0:00:22  0:00:20  0:00:02 5254k 95  115M   95  110M    0     0  5156k      0  0:00:22  0:00:21  0:00:01 5249k 99  115M   99  115M    0     0  5167k      0  0:00:22  0:00:22 --:--:-- 5251k100  115M  100  115M    0     0  5168k      0  0:00:22  0:00:22 --:--:-- 5242k
    master-2: Downloading kube-scheduler ...
    master-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-2:                                  Dload  Upload   Total   Spent    Left  Speed
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    716      0 --:--:-- --:--:-- --:--:--   716
    master-2:   4 47.3M    4 2382k    0     0  2487k      0  0:00:19 --:--:--  0:00:19 2487k 16 47.3M   16 7806k    0     0  3985k      0  0:00:12  0:00:01  0:00:11 5424k 27 47.3M   27 12.9M    0     0  4472k      0  0:00:10  0:00:02  0:00:08 5424k 38 47.3M   38 18.2M    0     0  4709k      0  0:00:10  0:00:03  0:00:07 5418k 49 47.3M   49 23.4M    0     0  4853k      0  0:00:09  0:00:04  0:00:05 5420k 59 47.3M   59 28.1M    0     0  4831k      0  0:00:10  0:00:05  0:00:05 5280k 70 47.3M   70 33.4M    0     0  4916k      0  0:00:09  0:00:06  0:00:03 5280k 81 47.3M   81 38.6M    0     0  4977k      0  0:00:09  0:00:07  0:00:02 5276k 92 47.3M   92 43.9M    0     0  5027k      0  0:00:09  0:00:08  0:00:01 5280k100 47.3M  100 47.3M    0     0  5053k      0  0:00:09  0:00:09 --:--:-- 5268k
    master-2: Downloading kubectl ...
    master-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    master-2:                                  Dload  Upload   Total   Spent    Left  Speed
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    733      0 --:--:-- --:--:-- --:--:--   733
    master-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  9 44.4M    9 4446k    0     0  3289k      0  0:00:13  0:00:01  0:00:12 4455k 21 44.4M   21 9854k    0     0  4189k      0  0:00:10  0:00:02  0:00:08 4934k 33 44.4M   33 14.9M    0     0  4558k      0  0:00:09  0:00:03  0:00:06 5096k 45 44.4M   45 20.2M    0     0  4757k      0  0:00:09  0:00:04  0:00:05 5178k 57 44.4M   57 25.4M    0     0  4877k      0  0:00:09  0:00:05  0:00:04 5224k 67 44.4M   67 30.1M    0     0  4854k      0  0:00:09  0:00:06  0:00:03 5278k 79 44.4M   79 35.4M    0     0  4931k      0  0:00:09  0:00:07  0:00:02 5280k 91 44.4M   91 40.7M    0     0  4989k      0  0:00:09  0:00:08  0:00:01 5280k100 44.4M  100 44.4M    0     0  5022k      0  0:00:09  0:00:09 --:--:-- 5269k
    master-2: [Unit]
    master-2: Description=Kubernetes API Server
    master-2: Documentation=https://github.com/kubernetes/kubernetes
    master-2: 
    master-2: [Service]
    master-2: ExecStart=/usr/local/bin/kube-apiserver \
    master-2:   --advertise-address=192.168.5.12 \
    master-2:   --allow-privileged=true \
    master-2:   --apiserver-count=2 \
    master-2:   --audit-log-maxage=30 \
    master-2:   --audit-log-maxbackup=3 \
    master-2:   --audit-log-maxsize=100 \
    master-2:   --audit-log-path=/var/log/audit.log \
    master-2:   --authorization-mode=Node,RBAC \
    master-2:   --bind-address=0.0.0.0 \
    master-2:   --client-ca-file=/var/lib/kubernetes/ca.crt \
    master-2:   --enable-admission-plugins=NodeRestriction,ServiceAccount \
    master-2:   --enable-swagger-ui=true \
    master-2:   --enable-bootstrap-token-auth=true \
    master-2:   --etcd-cafile=/var/lib/kubernetes/ca.crt \
    master-2:   --etcd-certfile=/var/lib/kubernetes/etcd-server.crt \
    master-2:   --etcd-keyfile=/var/lib/kubernetes/etcd-server.key \
    master-2:   --etcd-servers=https://192.168.5.11:2379,https://192.168.5.12:2379 \
    master-2:   --event-ttl=1h \
    master-2:   --encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \
    master-2:   --kubelet-certificate-authority=/var/lib/kubernetes/ca.crt \
    master-2:   --kubelet-client-certificate=/var/lib/kubernetes/kube-apiserver.crt \
    master-2:   --kubelet-client-key=/var/lib/kubernetes/kube-apiserver.key \
    master-2:   --runtime-config=api/all=true \
    master-2:   --service-account-key-file=/var/lib/kubernetes/service-account.crt \
    master-2:   --service-account-signing-key-file=/var/lib/kubernetes/service-account.key \
    master-2:   --service-account-issuer=kubernetes \
    master-2:   --service-cluster-ip-range=10.96.0.0/24 \
    master-2:   --service-node-port-range=30000-32767 \
    master-2:   --tls-cert-file=/var/lib/kubernetes/kube-apiserver.crt \
    master-2:   --tls-private-key-file=/var/lib/kubernetes/kube-apiserver.key \
    master-2:   --v=2
    master-2: Restart=on-failure
    master-2: RestartSec=5
    master-2: 
    master-2: [Install]
    master-2: WantedBy=multi-user.target
    master-2: [Unit]
    master-2: Description=Kubernetes Controller Manager
    master-2: Documentation=https://github.com/kubernetes/kubernetes
    master-2: 
    master-2: [Service]
    master-2: ExecStart=/usr/local/bin/kube-controller-manager \
    master-2:   --address=0.0.0.0 \
    master-2:   --cluster-cidr=192.168.5.0/24 \
    master-2:   --cluster-name=kubernetes \
    master-2:   --cluster-signing-cert-file=/var/lib/kubernetes/ca.crt \
    master-2:   --cluster-signing-key-file=/var/lib/kubernetes/ca.key \
    master-2:   --kubeconfig=/var/lib/kubernetes/kube-controller-manager.kubeconfig \
    master-2:   --leader-elect=true \
    master-2:   --root-ca-file=/var/lib/kubernetes/ca.crt \
    master-2:   --service-account-private-key-file=/var/lib/kubernetes/service-account.key \
    master-2:   --service-cluster-ip-range=10.96.0.0/24 \
    master-2:   --use-service-account-credentials=true \
    master-2:   --v=2
    master-2: Restart=on-failure
    master-2: RestartSec=5
    master-2: 
    master-2: [Install]
    master-2: WantedBy=multi-user.target
    master-2: [Unit]
    master-2: Description=Kubernetes Scheduler
    master-2: Documentation=https://github.com/kubernetes/kubernetes
    master-2: 
    master-2: [Service]
    master-2: ExecStart=/usr/local/bin/kube-scheduler \
    master-2:   --kubeconfig=/var/lib/kubernetes/kube-scheduler.kubeconfig \
    master-2:   --address=127.0.0.1 \
    master-2:   --leader-elect=true \
    master-2:   --v=2
    master-2: Restart=on-failure
    master-2: RestartSec=5
    master-2: 
    master-2: [Install]
    master-2: WantedBy=multi-user.target
    master-2: Created symlink /etc/systemd/system/multi-user.target.wants/kube-apiserver.service → /etc/systemd/system/kube-apiserver.service.
    master-2: Created symlink /etc/systemd/system/multi-user.target.wants/kube-controller-manager.service → /etc/systemd/system/kube-controller-manager.service.
    master-2: Created symlink /etc/systemd/system/multi-user.target.wants/kube-scheduler.service → /etc/systemd/system/kube-scheduler.service.
==> master-2: Running provisioner: configure_admin_kubectl (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-12zjw7i.sh
    master-2: Cluster "kubernetes-the-hard-way" set.
    master-2: User "admin" set.
    master-2: Context "kubernetes-the-hard-way" created.
    master-2: Switched to context "kubernetes-the-hard-way".
==> master-2: Running provisioner: tls_master_config (shell)...
    master-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1nt8a6m.sh
    master-2: secret/bootstrap-token-fd6f55 created
    master-2: clusterrolebinding.rbac.authorization.k8s.io/create-csrs-for-bootstrapping created
    master-2: clusterrolebinding.rbac.authorization.k8s.io/auto-approve-csrs-for-group created
    master-2: clusterrolebinding.rbac.authorization.k8s.io/auto-approve-renewals-for-nodes created
==> loadbalancer: Importing base box 'ubuntu/bionic64'...
[K==> loadbalancer: Matching MAC address for NAT networking...
==> loadbalancer: Setting the name of the VM: k8s-ha-lb
==> loadbalancer: Fixed port collision for 22 => 2222. Now on port 2201.
==> loadbalancer: Clearing any previously set network interfaces...
==> loadbalancer: Preparing network interfaces based on configuration...
    loadbalancer: Adapter 1: nat
    loadbalancer: Adapter 2: hostonly
==> loadbalancer: Forwarding ports...
    loadbalancer: 22 (guest) => 2730 (host) (adapter 1)
    loadbalancer: 22 (guest) => 2201 (host) (adapter 1)
==> loadbalancer: Running 'pre-boot' VM customizations...
==> loadbalancer: Booting VM...
==> loadbalancer: Waiting for machine to boot. This may take a few minutes...
    loadbalancer: SSH address: 127.0.0.1:2201
    loadbalancer: SSH username: vagrant
    loadbalancer: SSH auth method: private key
    loadbalancer: Warning: Connection reset. Retrying...
    loadbalancer: Warning: Connection aborted. Retrying...
    loadbalancer: 
    loadbalancer: Vagrant insecure key detected. Vagrant will automatically replace
    loadbalancer: this with a newly generated keypair for better security.
    loadbalancer: 
    loadbalancer: Inserting generated public key within guest...
    loadbalancer: Removing insecure key from the guest if it's present...
    loadbalancer: Key inserted! Disconnecting and reconnecting using new SSH key...
==> loadbalancer: Machine booted and ready!
==> loadbalancer: Checking for guest additions in VM...
    loadbalancer: The guest additions on this VM do not match the installed version of
    loadbalancer: VirtualBox! In most cases this is fine, but in rare cases it can
    loadbalancer: prevent things such as shared folders from working properly. If you see
    loadbalancer: shared folder errors, please make sure the guest additions within the
    loadbalancer: virtual machine match the version of VirtualBox you have installed on
    loadbalancer: your host and reload your VM.
    loadbalancer: 
    loadbalancer: Guest Additions Version: 5.2.42
    loadbalancer: VirtualBox Version: 6.1
==> loadbalancer: Setting hostname...
==> loadbalancer: Configuring and enabling network interfaces...
==> loadbalancer: Mounting shared folders...
    loadbalancer: /vagrant => C:/Users/MarcinBlazowski/Documents/Projects/k8s-hard-way/vagrant
==> loadbalancer: Running provisioner: setup-hosts (shell)...
    loadbalancer: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1e99tiq.sh
==> loadbalancer: Running provisioner: setup-dns (shell)...
    loadbalancer: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1hk1l8c.sh
==> loadbalancer: Running provisioner: lb_bootstrap (shell)...
    loadbalancer: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-yajf8v.sh
    loadbalancer: Hit:1 http://archive.ubuntu.com/ubuntu bionic InRelease
    loadbalancer: Get:2 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]
    loadbalancer: Get:3 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
    loadbalancer: Get:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]
    loadbalancer: Get:5 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [8570 kB]
    loadbalancer: Get:6 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [2117 kB]
    loadbalancer: Get:7 http://security.ubuntu.com/ubuntu bionic-security/main Translation-en [373 kB]
    loadbalancer: Get:8 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [646 kB]
    loadbalancer: Get:9 http://security.ubuntu.com/ubuntu bionic-security/restricted Translation-en [88.3 kB]
    loadbalancer: Get:10 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [1179 kB]
    loadbalancer: Get:11 http://archive.ubuntu.com/ubuntu bionic/universe Translation-en [4941 kB]
    loadbalancer: Get:12 http://security.ubuntu.com/ubuntu bionic-security/universe Translation-en [271 kB]
    loadbalancer: Get:13 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [17.6 kB]
    loadbalancer: Get:14 http://security.ubuntu.com/ubuntu bionic-security/multiverse Translation-en [3660 B]
    loadbalancer: Get:15 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [151 kB]
    loadbalancer: Get:16 http://archive.ubuntu.com/ubuntu bionic/multiverse Translation-en [108 kB]
    loadbalancer: Get:17 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [2465 kB]
    loadbalancer: Get:18 http://archive.ubuntu.com/ubuntu bionic-updates/main Translation-en [465 kB]
    loadbalancer: Get:19 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [671 kB]
    loadbalancer: Get:20 http://archive.ubuntu.com/ubuntu bionic-updates/restricted Translation-en [92.1 kB]
    loadbalancer: Get:21 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [1793 kB]
    loadbalancer: Get:22 http://archive.ubuntu.com/ubuntu bionic-updates/universe Translation-en [388 kB]
    loadbalancer: Get:23 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [24.2 kB]
    loadbalancer: Get:24 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse Translation-en [5980 B]
    loadbalancer: Get:25 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [10.3 kB]
    loadbalancer: Get:26 http://archive.ubuntu.com/ubuntu bionic-backports/main Translation-en [4824 B]
    loadbalancer: Get:27 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [11.3 kB]
    loadbalancer: Get:28 http://archive.ubuntu.com/ubuntu bionic-backports/universe Translation-en [5772 B]
    loadbalancer: Fetched 24.7 MB in 19s (1295 kB/s)
    loadbalancer: Reading package lists...
    loadbalancer: Reading package lists...
    loadbalancer: Building dependency tree...
    loadbalancer: Reading state information...
    loadbalancer: The following additional packages will be installed:
    loadbalancer:   liblua5.3-0
    loadbalancer: Suggested packages:
    loadbalancer:   vim-haproxy haproxy-doc
    loadbalancer: The following NEW packages will be installed:
    loadbalancer:   haproxy liblua5.3-0
    loadbalancer: 0 upgraded, 2 newly installed, 0 to remove and 30 not upgraded.
    loadbalancer: Need to get 1231 kB of archives.
    loadbalancer: After this operation, 2842 kB of additional disk space will be used.
    loadbalancer: Get:1 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 liblua5.3-0 amd64 5.3.3-1ubuntu0.18.04.1 [115 kB]
    loadbalancer: Get:2 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 haproxy amd64 1.8.8-1ubuntu0.11 [1116 kB]
    loadbalancer: dpkg-preconfigure: unable to re-open stdin: No such file or directory
    loadbalancer: Fetched 1231 kB in 4s (348 kB/s)
    loadbalancer: Selecting previously unselected package liblua5.3-0:amd64.
    loadbalancer: (Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 60079 files and directories currently installed.)
    loadbalancer: Preparing to unpack .../liblua5.3-0_5.3.3-1ubuntu0.18.04.1_amd64.deb ...
    loadbalancer: Unpacking liblua5.3-0:amd64 (5.3.3-1ubuntu0.18.04.1) ...
    loadbalancer: Selecting previously unselected package haproxy.
    loadbalancer: Preparing to unpack .../haproxy_1.8.8-1ubuntu0.11_amd64.deb ...
    loadbalancer: Unpacking haproxy (1.8.8-1ubuntu0.11) ...
    loadbalancer: Setting up liblua5.3-0:amd64 (5.3.3-1ubuntu0.18.04.1) ...
    loadbalancer: Setting up haproxy (1.8.8-1ubuntu0.11) ...
    loadbalancer: Created symlink /etc/systemd/system/multi-user.target.wants/haproxy.service → /lib/systemd/system/haproxy.service.
    loadbalancer: Processing triggers for libc-bin (2.27-3ubuntu1.4) ...
    loadbalancer: Processing triggers for systemd (237-3ubuntu10.53) ...
    loadbalancer: Processing triggers for man-db (2.8.3-2ubuntu0.1) ...
    loadbalancer: Processing triggers for rsyslog (8.32.0-1ubuntu4) ...
    loadbalancer: Processing triggers for ureadahead (0.100.0-21) ...
    loadbalancer: frontend kubernetes
    loadbalancer:     bind 192.168.5.30:6443
    loadbalancer:     option tcplog
    loadbalancer:     mode tcp
    loadbalancer:     default_backend kubernetes-master-nodes
    loadbalancer: 
    loadbalancer: backend kubernetes-master-nodes
    loadbalancer:     mode tcp
    loadbalancer:     balance roundrobin
    loadbalancer:     option tcp-check
    loadbalancer:     server master-1 192.168.5.11:6443 check fall 3 rise 2
    loadbalancer:     server master-2 192.168.5.12:6443 check fall 3 rise 2
==> worker-1: Importing base box 'ubuntu/bionic64'...
[K==> worker-1: Matching MAC address for NAT networking...
==> worker-1: Setting the name of the VM: k8s-ha-worker-1
==> worker-1: Fixed port collision for 22 => 2222. Now on port 2202.
==> worker-1: Clearing any previously set network interfaces...
==> worker-1: Preparing network interfaces based on configuration...
    worker-1: Adapter 1: nat
    worker-1: Adapter 2: hostonly
==> worker-1: Forwarding ports...
    worker-1: 22 (guest) => 2721 (host) (adapter 1)
    worker-1: 22 (guest) => 2202 (host) (adapter 1)
==> worker-1: Running 'pre-boot' VM customizations...
==> worker-1: Booting VM...
==> worker-1: Waiting for machine to boot. This may take a few minutes...
    worker-1: SSH address: 127.0.0.1:2202
    worker-1: SSH username: vagrant
    worker-1: SSH auth method: private key
    worker-1: Warning: Connection aborted. Retrying...
    worker-1: Warning: Connection reset. Retrying...
    worker-1: 
    worker-1: Vagrant insecure key detected. Vagrant will automatically replace
    worker-1: this with a newly generated keypair for better security.
    worker-1: 
    worker-1: Inserting generated public key within guest...
    worker-1: Removing insecure key from the guest if it's present...
    worker-1: Key inserted! Disconnecting and reconnecting using new SSH key...
==> worker-1: Machine booted and ready!
==> worker-1: Checking for guest additions in VM...
    worker-1: The guest additions on this VM do not match the installed version of
    worker-1: VirtualBox! In most cases this is fine, but in rare cases it can
    worker-1: prevent things such as shared folders from working properly. If you see
    worker-1: shared folder errors, please make sure the guest additions within the
    worker-1: virtual machine match the version of VirtualBox you have installed on
    worker-1: your host and reload your VM.
    worker-1: 
    worker-1: Guest Additions Version: 5.2.42
    worker-1: VirtualBox Version: 6.1
==> worker-1: Setting hostname...
==> worker-1: Configuring and enabling network interfaces...
==> worker-1: Mounting shared folders...
    worker-1: /vagrant => C:/Users/MarcinBlazowski/Documents/Projects/k8s-hard-way/vagrant
==> worker-1: Running provisioner: setup-hosts (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-z5cr3k.sh
==> worker-1: Running provisioner: setup-dns (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-wbxyoj.sh
==> worker-1: Running provisioner: install-docker (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1g18bvd.sh
    worker-1: # Executing docker install script, commit: 93d2499759296ac1f9c510605fef85052a2c32be
    worker-1: + sh -c apt-get update -qq >/dev/null
    worker-1: + sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null
    worker-1: + sh -c curl -fsSL "https://download.docker.com/linux/ubuntu/gpg" | gpg --dearmor --yes -o /usr/share/keyrings/docker-archive-keyring.gpg
    worker-1: + sh -c echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu bionic stable" > /etc/apt/sources.list.d/docker.list
    worker-1: + sh -c apt-get update -qq >/dev/null
    worker-1: + sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq --no-install-recommends  docker-ce-cli docker-scan-plugin docker-ce >/dev/null
    worker-1: + version_gte 20.10
    worker-1: + [ -z  ]
    worker-1: + return 0
    worker-1: + sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras >/dev/null
    worker-1: + sh -c docker version
    worker-1: Client: Docker Engine - Community
    worker-1:  Version:           20.10.12
    worker-1:  API version:       1.41
    worker-1:  Go version:        go1.16.12
    worker-1:  Git commit:        e91ed57
    worker-1:  Built:             Mon Dec 13 11:45:27 2021
    worker-1:  OS/Arch:           linux/amd64
    worker-1:  Context:           default
    worker-1:  Experimental:      true
    worker-1: 
    worker-1: Server: Docker Engine - Community
    worker-1:  Engine:
    worker-1:   Version:          20.10.12
    worker-1:   API version:      1.41 (minimum version 1.12)
    worker-1:   Go version:       go1.16.12
    worker-1:   Git commit:       459d0df
    worker-1:   Built:            Mon Dec 13 11:43:36 2021
    worker-1:   OS/Arch:          linux/amd64
    worker-1:   Experimental:     false
    worker-1:  containerd:
    worker-1:   Version:          1.4.13
    worker-1:   GitCommit:        9cc61520f4cd876b86e77edfeb88fbcd536d1f9d
    worker-1:  runc:
    worker-1:   Version:          1.0.3
    worker-1:   GitCommit:        v1.0.3-0-gf46b6ba
    worker-1:  docker-init:
    worker-1:   Version:          0.19.0
    worker-1:   GitCommit:        de40ad0
    worker-1: 
    worker-1: ================================================================================
    worker-1: 
    worker-1: To run Docker as a non-privileged user, consider setting up the
    worker-1: Docker daemon in rootless mode for your user:
    worker-1: 
    worker-1:     dockerd-rootless-setuptool.sh install
    worker-1: 
    worker-1: Visit https://docs.docker.com/go/rootless/ to learn about rootless mode.
    worker-1: 
    worker-1: 
    worker-1: To run the Docker daemon as a fully privileged service, but granting non-root
    worker-1: users access, refer to https://docs.docker.com/go/daemon-access/
    worker-1: 
    worker-1: WARNING: Access to the remote API on a privileged Docker daemon is equivalent
    worker-1:          to root access on the host. Refer to the 'Docker daemon attack surface'
    worker-1:          documentation for details: https://docs.docker.com/go/attack-surface/
    worker-1: 
    worker-1: ================================================================================
    worker-1: 
==> worker-1: Running provisioner: allow-bridge-nf-traffic (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-h02qai.sh
    worker-1: net.bridge.bridge-nf-call-iptables = 1
==> worker-1: Running provisioner: file...
    worker-1: ./ubuntu/cert_verify.sh => $HOME/
==> worker-1: Running provisioner: grant-ssh (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1wyjoiu.sh
==> worker-1: Running provisioner: install-kubectl (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1d2q5j1.sh
    worker-1: Downloading kubectl ...
    worker-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-1:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    719      0 --:--:-- --:--:-- --:--:--   719
    worker-1:   0 44.4M    0  420k    0     0   745k      0  0:01:01 --:--:--  0:01:01  745k 12 44.4M   12 5806k    0     0  3715k      0  0:00:12  0:00:01  0:00:11 5386k 24 44.4M   24 10.9M    0     0  4380k      0  0:00:10  0:00:02  0:00:08 5405k 36 44.4M   36 16.2M    0     0  4673k      0  0:00:09  0:00:03  0:00:06 5411k 48 44.4M   48 21.5M    0     0  4838k      0  0:00:09  0:00:04  0:00:05 5414k 60 44.4M   60 26.8M    0     0  4941k      0  0:00:09  0:00:05  0:00:04 5413k 70 44.4M   70 31.4M    0     0  4909k      0  0:00:09  0:00:06  0:00:03 5283k 82 44.4M   82 36.7M    0     0  4975k      0  0:00:09  0:00:07  0:00:02 5280k 94 44.4M   94 42.0M    0     0  5027k      0  0:00:09  0:00:08  0:00:01 5280k100 44.4M  100 44.4M    0     0  5043k      0  0:00:09  0:00:09 --:--:-- 5252k
==> worker-1: Running provisioner: create-kube-configs (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1mqzvfz.sh
==> worker-1: Running provisioner: configure_admin_kubectl (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1ms6gnn.sh
    worker-1: Cluster "kubernetes-the-hard-way" set.
    worker-1: User "admin" set.
    worker-1: Context "kubernetes-the-hard-way" created.
    worker-1: Switched to context "kubernetes-the-hard-way".
==> worker-1: Running provisioner: node_bootstrap (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-2la4nm.sh
    worker-1: v1.23.4
    worker-1: Downloading kubectl ...
    worker-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-1:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  8 44.4M    8 3886k    0     0  3902k      0  0:00:11 --:--:--  0:00:11 3898k 20 44.4M   20 9310k    0     0  4664k      0  0:00:09  0:00:01  0:00:08 4662k 32 44.4M   32 14.3M    0     0  4914k      0  0:00:09  0:00:02  0:00:07 4913k 44 44.4M   44 19.6M    0     0  5042k      0  0:00:09  0:00:03  0:00:06 5040k 56 44.4M   56 24.9M    0     0  5117k      0  0:00:08  0:00:04  0:00:04 5116k 66 44.4M   66 29.5M    0     0  5051k      0  0:00:09  0:00:05  0:00:04 5280k 78 44.4M   78 34.8M    0     0  5103k      0  0:00:08  0:00:06  0:00:02 5278k 90 44.4M   90 40.1M    0     0  5142k      0  0:00:08  0:00:07  0:00:01 5278k100 44.4M  100 44.4M    0     0  5169k      0  0:00:08  0:00:08 --:--:-- 5276k
    worker-1: Downloading kube-proxy ...
    worker-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-1:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 11 42.1M   11 4894k    0     0  4144k      0  0:00:10  0:00:01  0:00:09 4141k 23 42.1M   23 10.0M    0     0  4721k      0  0:00:09  0:00:02  0:00:07 4719k 36 42.1M   36 15.3M    0     0  4943k      0  0:00:08  0:00:03  0:00:05 4942k 49 42.1M   49 20.6M    0     0  5057k      0  0:00:08  0:00:04  0:00:04 5056k 61 42.1M   61 25.9M    0     0  5126k      0  0:00:08  0:00:05  0:00:03 5340k 72 42.1M   72 30.5M    0     0  5055k      0  0:00:08  0:00:06  0:00:02 5270k 85 42.1M   85 35.8M    0     0  5106k      0  0:00:08  0:00:07  0:00:01 5273k 97 42.1M   97 41.1M    0     0  5144k      0  0:00:08  0:00:08 --:--:-- 5273k100 42.1M  100 42.1M    0     0  5152k      0  0:00:08  0:00:08 --:--:-- 5246k
    worker-1: Downloading kubelet ...
    worker-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-1:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  2  118M    2 2798k    0     0  3511k      0  0:00:34 --:--:--  0:00:34 3507k  6  118M    6 8222k    0     0  4575k      0  0:00:26  0:00:01  0:00:25 4573k 11  118M   11 13.3M    0     0  4873k      0  0:00:24  0:00:02  0:00:22 4871k 15  118M   15 18.6M    0     0  5018k      0  0:00:24  0:00:03  0:00:21 5017k 20  118M   20 23.9M    0     0  5100k      0  0:00:23  0:00:04  0:00:19 5099k 24  118M   24 28.5M    0     0  5036k      0  0:00:24  0:00:05  0:00:19 5280k 28  118M   28 33.8M    0     0  5093k      0  0:00:23  0:00:06  0:00:17 5280k 32  118M   32 39.1M    0     0  5136k      0  0:00:23  0:00:07  0:00:16 5283k 37  118M   37 44.3M    0     0  5167k      0  0:00:23  0:00:08  0:00:15 5280k 41  118M   41 49.6M    0     0  5193k      0  0:00:23  0:00:09  0:00:14 5281k 46  118M   46 54.8M    0     0  5201k      0  0:00:23  0:00:10  0:00:13 5393k 50  118M   50 59.5M    0     0  5171k      0  0:00:23  0:00:11  0:00:12 5276k 54  118M   54 64.8M    0     0  5190k      0  0:00:23  0:00:12  0:00:11 5275k 59  118M   59 70.1M    0     0  5206k      0  0:00:23  0:00:13  0:00:10 5276k 63  118M   63 75.4M    0     0  5221k      0  0:00:23  0:00:14  0:00:09 5276k 67  118M   67 80.7M    0     0  5234k      0  0:00:23  0:00:15  0:00:08 5305k 71  118M   71 85.3M    0     0  5203k      0  0:00:23  0:00:16  0:00:07 5280k 76  118M   76 90.6M    0     0  5215k      0  0:00:23  0:00:17  0:00:06 5277k 80  118M   80 95.9M    0     0  5226k      0  0:00:23  0:00:18  0:00:05 5280k 85  118M   85  101M    0     0  5235k      0  0:00:23  0:00:19  0:00:04 5276k 89  118M   89  106M    0     0  5244k      0  0:00:23  0:00:20  0:00:03 5276k 93  118M   93  111M    0     0  5220k      0  0:00:23  0:00:21  0:00:02 5275k 98  118M   98  116M    0     0  5228k      0  0:00:23  0:00:22  0:00:01 5276k100  118M  100  118M    0     0  5232k      0  0:00:23  0:00:23 --:--:-- 5261k
    worker-1: kind: KubeletConfiguration
    worker-1: apiVersion: kubelet.config.k8s.io/v1beta1
    worker-1: authentication:
    worker-1:   anonymous:
    worker-1:     enabled: false
    worker-1:   webhook:
    worker-1:     enabled: true
    worker-1:   x509:
    worker-1:     clientCAFile: "/var/lib/kubernetes/ca.crt"
    worker-1: authorization:
    worker-1:   mode: Webhook
    worker-1: clusterDomain: "cluster.local"
    worker-1: clusterDNS:
    worker-1:   - "10.96.0.10"
    worker-1: resolvConf: "/run/systemd/resolve/resolv.conf"
    worker-1: runtimeRequestTimeout: "15m"
    worker-1: [Unit]
    worker-1: Description=Kubernetes Kubelet
    worker-1: Documentation=https://github.com/kubernetes/kubernetes
    worker-1: After=docker.service
    worker-1: Requires=docker.service
    worker-1: 
    worker-1: [Service]
    worker-1: ExecStart=/usr/local/bin/kubelet \
    worker-1:   --config=/var/lib/kubelet/kubelet-config.yaml \
    worker-1:   --image-pull-progress-deadline=2m \
    worker-1:   --kubeconfig=/var/lib/kubelet/kubeconfig \
    worker-1:   --tls-cert-file=/var/lib/kubelet/worker-1.crt \
    worker-1:   --tls-private-key-file=/var/lib/kubelet/worker-1.key \
    worker-1:   --network-plugin=cni \
    worker-1:   --register-node=true \
    worker-1:   --v=2
    worker-1: Restart=on-failure
    worker-1: RestartSec=5
    worker-1: 
    worker-1: [Install]
    worker-1: WantedBy=multi-user.target
    worker-1: kind: KubeProxyConfiguration
    worker-1: apiVersion: kubeproxy.config.k8s.io/v1alpha1
    worker-1: clientConnection:
    worker-1:   kubeconfig: "/var/lib/kube-proxy/kubeconfig"
    worker-1: mode: "iptables"
    worker-1: clusterCIDR: "192.168.5.0/24"
    worker-1: [Unit]
    worker-1: Description=Kubernetes Kube Proxy
    worker-1: Documentation=https://github.com/kubernetes/kubernetes
    worker-1: 
    worker-1: [Service]
    worker-1: ExecStart=/usr/local/bin/kube-proxy \
    worker-1:   --config=/var/lib/kube-proxy/kube-proxy-config.yaml
    worker-1: Restart=on-failure
    worker-1: RestartSec=5
    worker-1: 
    worker-1: [Install]
    worker-1: WantedBy=multi-user.target
    worker-1: Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /etc/systemd/system/kubelet.service.
    worker-1: Created symlink /etc/systemd/system/multi-user.target.wants/kube-proxy.service → /etc/systemd/system/kube-proxy.service.
==> worker-1: Running provisioner: tls_node_bootstrap (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1f70zr1.sh
    worker-1: This is worker-1. Exiting.
==> worker-1: Running provisioner: pod_networking (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-s4cx95.sh
    worker-1: v1.1.0
    worker-1: Downloading CNI v1.1.0 plugins...
    worker-1:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-1:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-1:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   671  100   671    0     0   1380      0 --:--:-- --:--:-- --:--:--  1380
    worker-1:   0 34.6M    0 26591    0     0  27216      0  0:22:15 --:--:--  0:22:15 27216 14 34.6M   14 5119k    0     0  2589k      0  0:00:13  0:00:01  0:00:12 5093k 29 34.6M   29 10.2M    0     0  3541k      0  0:00:10  0:00:02  0:00:08 5258k 44 34.6M   44 15.5M    0     0  4013k      0  0:00:08  0:00:03  0:00:05 5313k 60 34.6M   60 20.8M    0     0  4297k      0  0:00:08  0:00:04  0:00:04 5341k 75 34.6M   75 26.1M    0     0  4482k      0  0:00:07  0:00:05  0:00:02 5353k 90 34.6M   90 31.4M    0     0  4617k      0  0:00:07  0:00:06  0:00:01 5419k100 34.6M  100 34.6M    0     0  4682k      0  0:00:07  0:00:07 --:--:-- 5421k
    worker-1: ./
    worker-1: ./macvlan
    worker-1: ./static
    worker-1: ./vlan
    worker-1: ./portmap
    worker-1: ./host-local
    worker-1: ./vrf
    worker-1: ./bridge
    worker-1: ./tuning
    worker-1: ./firewall
    worker-1: ./host-device
    worker-1: ./sbr
    worker-1: ./loopback
    worker-1: ./dhcp
    worker-1: ./ptp
    worker-1: ./ipvlan
    worker-1: ./bandwidth
    worker-1: --2022-03-09 15:35:36--  https://cloud.weave.works/k8s/net?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIyMyIsIEdpdFZlcnNpb246InYxLjIzLjQiLCBHaXRDb21taXQ6ImU2YzA5M2Q4N2VhNGNiYjUzMGE3YjJhZTkxZTU0YzA4NDJkODMwOGEiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDIyLTAyLTE2VDEyOjM4OjA1WiIsIEdvVmVyc2lvbjoiZ28xLjE3LjciLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjIzIiwgR2l0VmVyc2lvbjoidjEuMjMuNCIsIEdpdENvbW1pdDoiZTZjMDkzZDg3ZWE0Y2JiNTMwYTdiMmFlOTFlNTRjMDg0MmQ4MzA4YSIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMjItMDItMTZUMTI6MzI6MDJaIiwgR29WZXJzaW9uOiJnbzEuMTcuNyIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg==
    worker-1: Resolving cloud.weave.works (cloud.weave.works)... 52.203.8.47, 54.165.111.206
    worker-1: Connecting to cloud.weave.works (cloud.weave.works)|52.203.8.47|:443... connected.
    worker-1: HTTP request sent, awaiting response... 302 Found
    worker-1: Location: /k8s/v1.16/net.yaml?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIyMyIsIEdpdFZlcnNpb246InYxLjIzLjQiLCBHaXRDb21taXQ6ImU2YzA5M2Q4N2VhNGNiYjUzMGE3YjJhZTkxZTU0YzA4NDJkODMwOGEiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDIyLTAyLTE2VDEyOjM4OjA1WiIsIEdvVmVyc2lvbjoiZ28xLjE3LjciLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjIzIiwgR2l0VmVyc2lvbjoidjEuMjMuNCIsIEdpdENvbW1pdDoiZTZjMDkzZDg3ZWE0Y2JiNTMwYTdiMmFlOTFlNTRjMDg0MmQ4MzA4YSIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMjItMDItMTZUMTI6MzI6MDJaIiwgR29WZXJzaW9uOiJnbzEuMTcuNyIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg== [following]
    worker-1: --2022-03-09 15:35:37--  https://cloud.weave.works/k8s/v1.16/net.yaml?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIyMyIsIEdpdFZlcnNpb246InYxLjIzLjQiLCBHaXRDb21taXQ6ImU2YzA5M2Q4N2VhNGNiYjUzMGE3YjJhZTkxZTU0YzA4NDJkODMwOGEiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDIyLTAyLTE2VDEyOjM4OjA1WiIsIEdvVmVyc2lvbjoiZ28xLjE3LjciLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjIzIiwgR2l0VmVyc2lvbjoidjEuMjMuNCIsIEdpdENvbW1pdDoiZTZjMDkzZDg3ZWE0Y2JiNTMwYTdiMmFlOTFlNTRjMDg0MmQ4MzA4YSIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMjItMDItMTZUMTI6MzI6MDJaIiwgR29WZXJzaW9uOiJnbzEuMTcuNyIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg==
    worker-1: Reusing existing connection to cloud.weave.works:443.
    worker-1: HTTP request sent, awaiting response... 200 OK
    worker-1: Length: 11705 (11K) [application/x-yaml]
    worker-1: Saving to: ‘weave-on-pods.yaml’
    worker-1: 
    worker-1:      0K .......... .                                          100% 6.22M=0.002s
    worker-1: 
    worker-1: 2022-03-09 15:35:37 (6.22 MB/s) - ‘weave-on-pods.yaml’ saved [11705/11705]
    worker-1: 
    worker-1: serviceaccount/weave-net created
    worker-1: clusterrole.rbac.authorization.k8s.io/weave-net created
    worker-1: clusterrolebinding.rbac.authorization.k8s.io/weave-net created
    worker-1: role.rbac.authorization.k8s.io/weave-net created
    worker-1: rolebinding.rbac.authorization.k8s.io/weave-net created
    worker-1: daemonset.apps/weave-net created
==> worker-1: Running provisioner: coredns_deploy (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1leo4vq.sh
    worker-1: This is not worker-2. Exiting.
==> worker-1: Running provisioner: kubelet_auth (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1nk2aeo.sh
    worker-1: clusterrole.rbac.authorization.k8s.io/system:kube-apiserver-to-kubelet created
    worker-1: clusterrolebinding.rbac.authorization.k8s.io/system:kube-apiserver created
==> worker-1: Running provisioner: smoke_tests (shell)...
    worker-1: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-uc87cq.sh
    worker-1: This is not worker-2. Exiting.
==> worker-2: Importing base box 'ubuntu/bionic64'...
[K==> worker-2: Matching MAC address for NAT networking...
==> worker-2: Setting the name of the VM: k8s-ha-worker-2
==> worker-2: Fixed port collision for 22 => 2222. Now on port 2203.
==> worker-2: Clearing any previously set network interfaces...
==> worker-2: Preparing network interfaces based on configuration...
    worker-2: Adapter 1: nat
    worker-2: Adapter 2: hostonly
==> worker-2: Forwarding ports...
    worker-2: 22 (guest) => 2722 (host) (adapter 1)
    worker-2: 22 (guest) => 2203 (host) (adapter 1)
==> worker-2: Running 'pre-boot' VM customizations...
==> worker-2: Booting VM...
==> worker-2: Waiting for machine to boot. This may take a few minutes...
    worker-2: SSH address: 127.0.0.1:2203
    worker-2: SSH username: vagrant
    worker-2: SSH auth method: private key
    worker-2: Warning: Connection reset. Retrying...
    worker-2: Warning: Connection aborted. Retrying...
    worker-2: Warning: Remote connection disconnect. Retrying...
    worker-2: 
    worker-2: Vagrant insecure key detected. Vagrant will automatically replace
    worker-2: this with a newly generated keypair for better security.
    worker-2: 
    worker-2: Inserting generated public key within guest...
    worker-2: Removing insecure key from the guest if it's present...
    worker-2: Key inserted! Disconnecting and reconnecting using new SSH key...
==> worker-2: Machine booted and ready!
==> worker-2: Checking for guest additions in VM...
    worker-2: The guest additions on this VM do not match the installed version of
    worker-2: VirtualBox! In most cases this is fine, but in rare cases it can
    worker-2: prevent things such as shared folders from working properly. If you see
    worker-2: shared folder errors, please make sure the guest additions within the
    worker-2: virtual machine match the version of VirtualBox you have installed on
    worker-2: your host and reload your VM.
    worker-2: 
    worker-2: Guest Additions Version: 5.2.42
    worker-2: VirtualBox Version: 6.1
==> worker-2: Setting hostname...
==> worker-2: Configuring and enabling network interfaces...
==> worker-2: Mounting shared folders...
    worker-2: /vagrant => C:/Users/MarcinBlazowski/Documents/Projects/k8s-hard-way/vagrant
==> worker-2: Running provisioner: setup-hosts (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-10fbmhz.sh
==> worker-2: Running provisioner: setup-dns (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-4nxxme.sh
==> worker-2: Running provisioner: install-docker (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-hto9lu.sh
    worker-2: # Executing docker install script, commit: 93d2499759296ac1f9c510605fef85052a2c32be
    worker-2: + sh -c apt-get update -qq >/dev/null
    worker-2: + sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null
    worker-2: + sh -c curl -fsSL "https://download.docker.com/linux/ubuntu/gpg" | gpg --dearmor --yes -o /usr/share/keyrings/docker-archive-keyring.gpg
    worker-2: + sh -c echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu bionic stable" > /etc/apt/sources.list.d/docker.list
    worker-2: + sh -c apt-get update -qq >/dev/null
    worker-2: + sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq --no-install-recommends  docker-ce-cli docker-scan-plugin docker-ce >/dev/null
    worker-2: + version_gte 20.10
    worker-2: + [ -z  ]
    worker-2: + return 0
    worker-2: + sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras >/dev/null
    worker-2: + sh -c docker version
    worker-2: Client: Docker Engine - Community
    worker-2:  Version:           20.10.12
    worker-2:  API version:       1.41
    worker-2:  Go version:        go1.16.12
    worker-2:  Git commit:        e91ed57
    worker-2:  Built:             Mon Dec 13 11:45:27 2021
    worker-2:  OS/Arch:           linux/amd64
    worker-2:  Context:           default
    worker-2:  Experimental:      true
    worker-2: 
    worker-2: Server: Docker Engine - Community
    worker-2:  Engine:
    worker-2:   Version:          20.10.12
    worker-2:   API version:      1.41 (minimum version 1.12)
    worker-2:   Go version:       go1.16.12
    worker-2:   Git commit:       459d0df
    worker-2:   Built:            Mon Dec 13 11:43:36 2021
    worker-2:   OS/Arch:          linux/amd64
    worker-2:   Experimental:     false
    worker-2:  containerd:
    worker-2:   Version:          1.4.13
    worker-2:   GitCommit:        9cc61520f4cd876b86e77edfeb88fbcd536d1f9d
    worker-2:  runc:
    worker-2:   Version:          1.0.3
    worker-2:   GitCommit:        v1.0.3-0-gf46b6ba
    worker-2:  docker-init:
    worker-2:   Version:          0.19.0
    worker-2:   GitCommit:        de40ad0
    worker-2: 
    worker-2: ================================================================================
    worker-2: 
    worker-2: To run Docker as a non-privileged user, consider setting up the
    worker-2: Docker daemon in rootless mode for your user:
    worker-2: 
    worker-2:     dockerd-rootless-setuptool.sh install
    worker-2: 
    worker-2: Visit https://docs.docker.com/go/rootless/ to learn about rootless mode.
    worker-2: 
    worker-2: 
    worker-2: To run the Docker daemon as a fully privileged service, but granting non-root
    worker-2: users access, refer to https://docs.docker.com/go/daemon-access/
    worker-2: 
    worker-2: WARNING: Access to the remote API on a privileged Docker daemon is equivalent
    worker-2:          to root access on the host. Refer to the 'Docker daemon attack surface'
    worker-2:          documentation for details: https://docs.docker.com/go/attack-surface/
    worker-2: 
    worker-2: ================================================================================
    worker-2: 
==> worker-2: Running provisioner: allow-bridge-nf-traffic (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1fp0zgl.sh
    worker-2: net.bridge.bridge-nf-call-iptables = 1
==> worker-2: Running provisioner: file...
    worker-2: ./ubuntu/cert_verify.sh => $HOME/
==> worker-2: Running provisioner: grant-ssh (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-ji1hez.sh
==> worker-2: Running provisioner: install-kubectl (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1wg18jk.sh
    worker-2: Downloading kubectl ...
    worker-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-2:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   154  100   154    0     0    740      0 --:--:-- --:--:-- --:--:--   740
    worker-2:   1 44.4M    1  700k    0     0  1144k      0  0:00:39 --:--:--  0:00:39 1144k 13 44.4M   13 6110k    0     0  3779k      0  0:00:12  0:00:01  0:00:11 5388k 25 44.4M   25 11.2M    0     0  4403k      0  0:00:10  0:00:02  0:00:08 5401k 37 44.4M   37 16.5M    0     0  4684k      0  0:00:09  0:00:03  0:00:06 5406k 49 44.4M   49 21.8M    0     0  4842k      0  0:00:09  0:00:04  0:00:05 5408k 60 44.4M   60 26.8M    0     0  4896k      0  0:00:09  0:00:05  0:00:04 5356k 71 44.4M   71 31.7M    0     0  4909k      0  0:00:09  0:00:06  0:00:03 5275k 83 44.4M   83 37.0M    0     0  4979k      0  0:00:09  0:00:07  0:00:02 5280k 95 44.4M   95 42.3M    0     0  5030k      0  0:00:09  0:00:08  0:00:01 5280k100 44.4M  100 44.4M    0     0  5048k      0  0:00:09  0:00:09 --:--:-- 5264k
==> worker-2: Running provisioner: create-kube-configs (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-q2wwqu.sh
==> worker-2: Running provisioner: configure_admin_kubectl (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1bifs5a.sh
    worker-2: Cluster "kubernetes-the-hard-way" set.
    worker-2: User "admin" set.
    worker-2: Context "kubernetes-the-hard-way" created.
    worker-2: Switched to context "kubernetes-the-hard-way".
==> worker-2: Running provisioner: node_bootstrap (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1y443z8.sh
    worker-2: This is not worker-1. Exiting.
==> worker-2: Running provisioner: tls_node_bootstrap (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-ve16xb.sh
    worker-2: v1.23.4
    worker-2: Downloading kubectl ...
    worker-2: kubectl               0%[                    ]       0  --.-KB/s               kubectl               1%[                    ] 846.80K  4.13MB/s               kubectl               4%[                    ]   1.88M  4.68MB/s               kubectl               6%[>                   ]   2.94M  4.89MB/s               kubectl               9%[>                   ]   4.01M  4.99MB/s               kubectl              11%[=>                  ]   5.08M  5.03MB/s               kubectl              13%[=>                  ]   6.18M  5.08MB/s               kubectl              16%[==>                 ]   7.26M  5.12MB/s               kubectl              18%[==>                 ]   8.33M  5.14MB/s               kubectl              21%[===>                ]   9.41M  5.16MB/s               kubectl              23%[===>                ]  10.47M  5.18MB/s               kubectl              25%[====>               ]  11.54M  5.19MB/s               kubectl              28%[====>               ]  12.60M  5.20MB/s               kubectl              30%[=====>              ]  13.66M  5.20MB/s               kubectl              33%[=====>              ]  14.72M  5.21MB/s               kubectl              35%[======>             ]  15.79M  5.22MB/s    eta 5s     kubectl              37%[======>             ]  16.85M  5.29MB/s    eta 5s     kubectl              40%[=======>            ]  17.91M  5.30MB/s    eta 5s     kubectl              42%[=======>            ]  18.97M  5.30MB/s    eta 5s     kubectl              45%[========>           ]  20.04M  5.30MB/s    eta 5s     kubectl              47%[========>           ]  21.10M  5.30MB/s    eta 4s     kubectl              49%[========>           ]  22.16M  5.30MB/s    eta 4s     kubectl              52%[=========>          ]  23.22M  5.30MB/s    eta 4s     kubectl              54%[=========>          ]  24.29M  5.30MB/s    eta 4s     kubectl              57%[==========>         ]  25.35M  5.30MB/s    eta 4s     kubectl              59%[==========>         ]  26.42M  5.31MB/s    eta 3s     kubectl              60%[===========>        ]  27.05M  5.16MB/s    eta 3s     kubectl              62%[===========>        ]  27.88M  5.08MB/s    eta 3s     kubectl              65%[============>       ]  28.96M  5.08MB/s    eta 3s     kubectl              67%[============>       ]  30.02M  5.08MB/s    eta 3s     kubectl              69%[============>       ]  31.08M  5.09MB/s    eta 3s     kubectl              72%[=============>      ]  32.15M  5.08MB/s    eta 3s     kubectl              74%[=============>      ]  33.21M  5.08MB/s    eta 3s     kubectl              77%[==============>     ]  34.27M  5.08MB/s    eta 3s     kubectl              79%[==============>     ]  35.35M  5.07MB/s    eta 3s     kubectl              81%[===============>    ]  36.43M  5.08MB/s    eta 2s     kubectl              84%[===============>    ]  37.49M  5.08MB/s    eta 2s     kubectl              86%[================>   ]  38.55M  5.08MB/s    eta 2s     kubectl              89%[================>   ]  39.62M  5.08MB/s    eta 2s     kubectl              91%[=================>  ]  40.68M  5.08MB/s    eta 2s     kubectl              93%[=================>  ]  41.74M  5.08MB/s    eta 1s     kubectl              96%[==================> ]  42.80M  5.14MB/s    eta 1s     kubectl              98%[==================> ]  43.87M  5.30MB/s    eta 1s     kubectl             100%[===================>]  44.43M  5.30MB/s    in 8.6s
    worker-2: Downloading kube-proxy ...
    worker-2: kube-proxy            0%[                    ]       0  --.-KB/s               kube-proxy            1%[                    ] 848.17K  4.04MB/s               kube-proxy            4%[                    ]   1.90M  4.64MB/s               kube-proxy            7%[>                   ]   2.99M  4.90MB/s               kube-proxy            9%[>                   ]   4.05M  5.00MB/s               kube-proxy           12%[=>                  ]   5.12M  5.06MB/s               kube-proxy           14%[=>                  ]   6.18M  5.09MB/s               kube-proxy           17%[==>                 ]   7.26M  5.12MB/s               kube-proxy           19%[==>                 ]   8.32M  5.15MB/s               kube-proxy           22%[===>                ]   9.38M  5.16MB/s               kube-proxy           24%[===>                ]  10.44M  5.17MB/s               kube-proxy           27%[====>               ]  11.51M  5.19MB/s               kube-proxy           29%[====>               ]  12.57M  5.19MB/s               kube-proxy           32%[=====>              ]  13.63M  5.20MB/s               kube-proxy           34%[=====>              ]  14.69M  5.21MB/s               kube-proxy           37%[======>             ]  15.76M  5.22MB/s    eta 5s     kube-proxy           39%[======>             ]  16.82M  5.30MB/s    eta 5s     kube-proxy           42%[=======>            ]  17.88M  5.30MB/s    eta 5s     kube-proxy           44%[=======>            ]  18.94M  5.29MB/s    eta 5s     kube-proxy           47%[========>           ]  20.01M  5.29MB/s    eta 5s     kube-proxy           50%[=========>          ]  21.08M  5.30MB/s    eta 4s     kube-proxy           52%[=========>          ]  22.15M  5.30MB/s    eta 4s     kube-proxy           55%[==========>         ]  23.21M  5.30MB/s    eta 4s     kube-proxy           57%[==========>         ]  24.27M  5.30MB/s    eta 4s     kube-proxy           60%[===========>        ]  25.35M  5.30MB/s    eta 4s     kube-proxy           62%[===========>        ]  26.41M  5.30MB/s    eta 3s     kube-proxy           65%[============>       ]  27.47M  5.30MB/s    eta 3s     kube-proxy           67%[============>       ]  28.27M  5.20MB/s    eta 3s     kube-proxy           68%[============>       ]  28.96M  5.07MB/s    eta 3s     kube-proxy           71%[=============>      ]  30.02M  5.08MB/s    eta 3s     kube-proxy           73%[=============>      ]  31.08M  5.08MB/s    eta 2s     kube-proxy           76%[==============>     ]  32.15M  5.07MB/s    eta 2s     kube-proxy           78%[==============>     ]  33.22M  5.08MB/s    eta 2s     kube-proxy           81%[===============>    ]  34.27M  5.08MB/s    eta 2s     kube-proxy           83%[===============>    ]  35.33M  5.07MB/s    eta 2s     kube-proxy           86%[================>   ]  36.40M  5.08MB/s    eta 1s     kube-proxy           88%[================>   ]  37.47M  5.08MB/s    eta 1s     kube-proxy           91%[=================>  ]  38.54M  5.07MB/s    eta 1s     kube-proxy           94%[=================>  ]  39.60M  5.08MB/s    eta 1s     kube-proxy           96%[==================> ]  40.66M  5.08MB/s    eta 1s     kube-proxy           99%[==================> ]  41.74M  5.07MB/s    eta 0s     kube-proxy          100%[===================>]  42.12M  5.08MB/s    in 8.1s
    worker-2: Downloading kubelet ...
    worker-2: kubelet               0%[                    ]       0  --.-KB/s               kubelet               0%[                    ] 860.83K  4.19MB/s               kubelet               1%[                    ]   1.88M  4.69MB/s               kubelet               2%[                    ]   2.94M  4.89MB/s               kubelet               3%[                    ]   4.01M  5.01MB/s               kubelet               4%[                    ]   5.07M  5.06MB/s               kubelet               5%[>                   ]   6.10M  5.07MB/s               kubelet               6%[>                   ]   7.19M  5.12MB/s               kubelet               6%[>                   ]   8.26M  5.14MB/s               kubelet               7%[>                   ]   9.30M  5.15MB/s               kubelet               8%[>                   ]  10.40M  5.18MB/s               kubelet               9%[>                   ]  11.46M  5.19MB/s               kubelet              10%[=>                  ]  12.54M  5.20MB/s               kubelet              11%[=>                  ]  13.60M  5.21MB/s               kubelet              12%[=>                  ]  14.68M  5.21MB/s               kubelet              13%[=>                  ]  15.74M  5.22MB/s    eta 20s    kubelet              14%[=>                  ]  16.80M  5.29MB/s    eta 20s    kubelet              15%[==>                 ]  17.87M  5.30MB/s    eta 20s    kubelet              15%[==>                 ]  18.94M  5.30MB/s    eta 20s    kubelet              16%[==>                 ]  19.99M  5.30MB/s    eta 20s    kubelet              17%[==>                 ]  21.05M  5.30MB/s    eta 19s    kubelet              18%[==>                 ]  22.13M  5.30MB/s    eta 19s    kubelet              19%[==>                 ]  23.19M  5.30MB/s    eta 19s    kubelet              20%[===>                ]  24.26M  5.30MB/s    eta 19s    kubelet              21%[===>                ]  25.32M  5.31MB/s    eta 19s    kubelet              22%[===>                ]  26.38M  5.30MB/s    eta 18s    kubelet              22%[===>                ]  27.04M  5.17MB/s    eta 18s    kubelet              23%[===>                ]  27.80M  5.08MB/s    eta 18s    kubelet              24%[===>                ]  28.88M  5.07MB/s    eta 18s    kubelet              25%[====>               ]  29.94M  5.07MB/s    eta 18s    kubelet              26%[====>               ]  31.01M  5.07MB/s    eta 17s    kubelet              27%[====>               ]  32.07M  5.07MB/s    eta 17s    kubelet              27%[====>               ]  33.13M  5.07MB/s    eta 17s    kubelet              28%[====>               ]  34.19M  5.07MB/s    eta 17s    kubelet              29%[====>               ]  35.29M  5.07MB/s    eta 17s    kubelet              30%[=====>              ]  36.35M  5.07MB/s    eta 16s    kubelet              31%[=====>              ]  37.41M  5.07MB/s    eta 16s    kubelet              32%[=====>              ]  38.47M  5.06MB/s    eta 16s    kubelet              33%[=====>              ]  39.54M  5.07MB/s    eta 16s    kubelet              34%[=====>              ]  40.60M  5.07MB/s    eta 16s    kubelet              35%[======>             ]  41.66M  5.06MB/s    eta 15s    kubelet              35%[======>             ]  42.72M  5.11MB/s    eta 15s    kubelet              36%[======>             ]  43.79M  5.28MB/s    eta 15s    kubelet              37%[======>             ]  44.85M  5.29MB/s    eta 15s    kubelet              38%[======>             ]  45.91M  5.30MB/s    eta 15s    kubelet              39%[======>             ]  46.97M  5.30MB/s    eta 14s    kubelet              40%[=======>            ]  48.04M  5.29MB/s    eta 14s    kubelet              41%[=======>            ]  49.10M  5.29MB/s    eta 14s    kubelet              42%[=======>            ]  50.16M  5.30MB/s    eta 14s    kubelet              43%[=======>            ]  51.22M  5.30MB/s    eta 14s    kubelet              44%[=======>            ]  52.29M  5.30MB/s    eta 13s    kubelet              44%[=======>            ]  53.35M  5.30MB/s    eta 13s    kubelet              45%[========>           ]  54.08M  5.20MB/s    eta 13s    kubelet              46%[========>           ]  54.79M  5.08MB/s    eta 13s    kubelet              47%[========>           ]  55.88M  5.09MB/s    eta 13s    kubelet              47%[========>           ]  56.94M  5.08MB/s    eta 12s    kubelet              48%[========>           ]  58.01M  5.08MB/s    eta 12s    kubelet              49%[========>           ]  59.07M  5.09MB/s    eta 12s    kubelet              50%[=========>          ]  60.13M  5.08MB/s    eta 12s    kubelet              51%[=========>          ]  61.19M  5.08MB/s    eta 12s    kubelet              52%[=========>          ]  62.26M  5.08MB/s    eta 11s    kubelet              53%[=========>          ]  63.32M  5.08MB/s    eta 11s    kubelet              54%[=========>          ]  64.38M  5.08MB/s    eta 11s    kubelet              55%[==========>         ]  65.46M  5.09MB/s    eta 11s    kubelet              56%[==========>         ]  66.52M  5.08MB/s    eta 11s    kubelet              56%[==========>         ]  67.58M  5.08MB/s    eta 10s    kubelet              57%[==========>         ]  68.66M  5.08MB/s    eta 10s    kubelet              58%[==========>         ]  69.72M  5.18MB/s    eta 10s    kubelet              59%[==========>         ]  70.79M  5.30MB/s    eta 10s    kubelet              60%[===========>        ]  71.85M  5.30MB/s    eta 10s    kubelet              61%[===========>        ]  72.91M  5.30MB/s    eta 9s     kubelet              62%[===========>        ]  73.97M  5.30MB/s    eta 9s     kubelet              63%[===========>        ]  75.04M  5.30MB/s    eta 9s     kubelet              64%[===========>        ]  76.10M  5.30MB/s    eta 9s     kubelet              64%[===========>        ]  77.18M  5.30MB/s    eta 9s     kubelet              65%[============>       ]  78.24M  5.30MB/s    eta 8s     kubelet              66%[============>       ]  79.30M  5.30MB/s    eta 8s     kubelet              67%[============>       ]  80.37M  5.30MB/s    eta 8s     kubelet              68%[============>       ]  81.12M  5.20MB/s    eta 8s     kubelet              68%[============>       ]  81.79M  5.07MB/s    eta 8s     kubelet              69%[============>       ]  82.88M  5.06MB/s    eta 7s     kubelet              70%[=============>      ]  83.94M  5.07MB/s    eta 7s     kubelet              71%[=============>      ]  85.01M  5.07MB/s    eta 7s     kubelet              72%[=============>      ]  86.08M  5.06MB/s    eta 7s     kubelet              73%[=============>      ]  87.16M  5.07MB/s    eta 7s     kubelet              74%[=============>      ]  88.24M  5.08MB/s    eta 6s     kubelet              75%[==============>     ]  89.30M  5.07MB/s    eta 6s     kubelet              76%[==============>     ]  90.37M  5.07MB/s    eta 6s     kubelet              77%[==============>     ]  91.44M  5.07MB/s    eta 6s     kubelet              77%[==============>     ]  92.51M  5.06MB/s    eta 6s     kubelet              78%[==============>     ]  93.58M  5.07MB/s    eta 5s     kubelet              79%[==============>     ]  94.63M  5.07MB/s    eta 5s     kubelet              80%[===============>    ]  95.71M  5.06MB/s    eta 5s     kubelet              81%[===============>    ]  96.77M  5.07MB/s    eta 5s     kubelet              82%[===============>    ]  97.85M  5.25MB/s    eta 5s     kubelet              83%[===============>    ]  98.91M  5.30MB/s    eta 4s     kubelet              84%[===============>    ]  99.97M  5.30MB/s    eta 4s     kubelet              85%[================>   ] 101.04M  5.30MB/s    eta 4s     kubelet              85%[================>   ] 102.10M  5.30MB/s    eta 4s     kubelet              86%[================>   ] 103.18M  5.30MB/s    eta 4s     kubelet              87%[================>   ] 104.24M  5.30MB/s    eta 3s     kubelet              88%[================>   ] 105.30M  5.30MB/s    eta 3s     kubelet              89%[======
    worker-2: ==========>   ] 106.38M  5.30MB/s    eta 3s     kubelet              90%[=================>  ] 107.44M  5.30MB/s    eta 3s     kubelet              91%[=================>  ] 108.21M  5.19MB/s    eta 3s     kubelet              91%[=================>  ] 108.88M  5.07MB/s    eta 2s     kubelet              92%[=================>  ] 109.94M  5.07MB/s    eta 2s     kubelet              93%[=================>  ] 111.01M  5.07MB/s    eta 2s     kubelet              94%[=================>  ] 112.07M  5.07MB/s    eta 2s     kubelet              95%[==================> ] 113.15M  5.07MB/s    eta 2s     kubelet              96%[==================> ] 114.21M  5.06MB/s    eta 1s     kubelet              97%[==================> ] 115.27M  5.07MB/s    eta 1s     kubelet              97%[==================> ] 116.35M  5.07MB/s    eta 1s     kubelet              98%[==================> ] 117.41M  5.07MB/s    eta 1s     kubelet              99%[==================> ] 118.49M  5.07MB/s    eta 1s     kubelet             100%[===================>] 118.75M  5.08MB/s    in 23s
    worker-2: apiVersion: v1
    worker-2: clusters:
    worker-2: - cluster:
    worker-2:     certificate-authority: /var/lib/kubernetes/ca.crt
    worker-2:     server: https://192.168.5.30:6443
    worker-2:   name: bootstrap
    worker-2: contexts:
    worker-2: - context:
    worker-2:     cluster: bootstrap
    worker-2:     user: kubelet-bootstrap
    worker-2:   name: bootstrap
    worker-2: current-context: bootstrap
    worker-2: kind: Config
    worker-2: preferences: {}
    worker-2: users:
    worker-2: - name: kubelet-bootstrap
    worker-2:   user:
    worker-2:     token: fd6f55.8691aae629336a4e
    worker-2: kind: KubeletConfiguration
    worker-2: apiVersion: kubelet.config.k8s.io/v1beta1
    worker-2: authentication:
    worker-2:   anonymous:
    worker-2:     enabled: false
    worker-2:   webhook:
    worker-2:     enabled: true
    worker-2:   x509:
    worker-2:     clientCAFile: "/var/lib/kubernetes/ca.crt"
    worker-2: authorization:
    worker-2:   mode: Webhook
    worker-2: clusterDomain: "cluster.local"
    worker-2: clusterDNS:
    worker-2:   - "10.96.0.10"
    worker-2: resolvConf: "/run/systemd/resolve/resolv.conf"
    worker-2: runtimeRequestTimeout: "15m"
    worker-2: [Unit]
    worker-2: Description=Kubernetes Kubelet
    worker-2: Documentation=https://github.com/kubernetes/kubernetes
    worker-2: After=docker.service
    worker-2: Requires=docker.service
    worker-2: 
    worker-2: [Service]
    worker-2: ExecStart=/usr/local/bin/kubelet \
    worker-2:   --bootstrap-kubeconfig="/var/lib/kubelet/bootstrap-kubeconfig" \
    worker-2:   --config=/var/lib/kubelet/kubelet-config.yaml \
    worker-2:   --image-pull-progress-deadline=2m \
    worker-2:   --kubeconfig=/var/lib/kubelet/kubeconfig \
    worker-2:   --cert-dir=/var/lib/kubelet/pki/ \
    worker-2:   --rotate-certificates=true \
    worker-2:   --rotate-server-certificates=true \
    worker-2:   --network-plugin=cni \
    worker-2:   --register-node=true \
    worker-2:   --v=2
    worker-2: Restart=on-failure
    worker-2: RestartSec=5
    worker-2: 
    worker-2: [Install]
    worker-2: WantedBy=multi-user.target
    worker-2: kind: KubeProxyConfiguration
    worker-2: apiVersion: kubeproxy.config.k8s.io/v1alpha1
    worker-2: clientConnection:
    worker-2:   kubeconfig: "/var/lib/kube-proxy/kubeconfig"
    worker-2: mode: "iptables"
    worker-2: clusterCIDR: "192.168.5.0/24"
    worker-2: [Unit]
    worker-2: Description=Kubernetes Kube Proxy
    worker-2: Documentation=https://github.com/kubernetes/kubernetes
    worker-2: 
    worker-2: [Service]
    worker-2: ExecStart=/usr/local/bin/kube-proxy \
    worker-2:   --config=/var/lib/kube-proxy/kube-proxy-config.yaml
    worker-2: Restart=on-failure
    worker-2: RestartSec=5
    worker-2: 
    worker-2: [Install]
    worker-2: WantedBy=multi-user.target
    worker-2: Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /etc/systemd/system/kubelet.service.
    worker-2: Created symlink /etc/systemd/system/multi-user.target.wants/kube-proxy.service → /etc/systemd/system/kube-proxy.service.
    worker-2: timed out waiting for the condition on certificatesigningrequests/csr-b4sn9
    worker-2: timed out waiting for the condition on certificatesigningrequests/csr-l8spv
    worker-2: CSR ID = csr-b4sn9
    worker-2: certificatesigningrequest.certificates.k8s.io/csr-b4sn9 approved
==> worker-2: Running provisioner: pod_networking (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-130k5hr.sh
    worker-2: v1.1.0
    worker-2: Downloading CNI v1.1.0 plugins...
    worker-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-2:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   671  100   671    0     0   1278      0 --:--:-- --:--:-- --:--:--  1275
    worker-2:   3 34.6M    3 1132k    0     0   913k      0  0:00:38  0:00:01  0:00:37  913k 19 34.6M   19 7074k    0     0  3166k      0  0:00:11  0:00:02  0:00:09 5972k 35 34.6M   35 12.2M    0     0  3867k      0  0:00:09  0:00:03  0:00:06 5702k 50 34.6M   50 17.5M    0     0  4235k      0  0:00:08  0:00:04  0:00:04 5609k 65 34.6M   65 22.8M    0     0  4460k      0  0:00:07  0:00:05  0:00:02 5560k 81 34.6M   81 28.1M    0     0  4616k      0  0:00:07  0:00:06  0:00:01 5534k 96 34.6M   96 33.3M    0     0  4725k      0  0:00:07  0:00:07 --:--:-- 5422k100 34.6M  100 34.6M    0     0  4749k      0  0:00:07  0:00:07 --:--:-- 5422k
    worker-2: ./
    worker-2: ./macvlan
    worker-2: ./static
    worker-2: ./vlan
    worker-2: ./portmap
    worker-2: ./host-local
    worker-2: ./vrf
    worker-2: ./bridge
    worker-2: ./tuning
    worker-2: ./firewall
    worker-2: ./host-device
    worker-2: ./sbr
    worker-2: ./loopback
    worker-2: ./dhcp
    worker-2: ./ptp
    worker-2: ./ipvlan
    worker-2: ./bandwidth
    worker-2: --2022-03-09 15:39:25--  https://cloud.weave.works/k8s/net?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIyMyIsIEdpdFZlcnNpb246InYxLjIzLjQiLCBHaXRDb21taXQ6ImU2YzA5M2Q4N2VhNGNiYjUzMGE3YjJhZTkxZTU0YzA4NDJkODMwOGEiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDIyLTAyLTE2VDEyOjM4OjA1WiIsIEdvVmVyc2lvbjoiZ28xLjE3LjciLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjIzIiwgR2l0VmVyc2lvbjoidjEuMjMuNCIsIEdpdENvbW1pdDoiZTZjMDkzZDg3ZWE0Y2JiNTMwYTdiMmFlOTFlNTRjMDg0MmQ4MzA4YSIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMjItMDItMTZUMTI6MzI6MDJaIiwgR29WZXJzaW9uOiJnbzEuMTcuNyIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg==
    worker-2: Resolving cloud.weave.works (cloud.weave.works)... 52.203.8.47, 54.165.111.206
    worker-2: Connecting to cloud.weave.works (cloud.weave.works)|52.203.8.47|:443... connected.
    worker-2: HTTP request sent, awaiting response... 302 Found
    worker-2: Location: /k8s/v1.16/net.yaml?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIyMyIsIEdpdFZlcnNpb246InYxLjIzLjQiLCBHaXRDb21taXQ6ImU2YzA5M2Q4N2VhNGNiYjUzMGE3YjJhZTkxZTU0YzA4NDJkODMwOGEiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDIyLTAyLTE2VDEyOjM4OjA1WiIsIEdvVmVyc2lvbjoiZ28xLjE3LjciLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjIzIiwgR2l0VmVyc2lvbjoidjEuMjMuNCIsIEdpdENvbW1pdDoiZTZjMDkzZDg3ZWE0Y2JiNTMwYTdiMmFlOTFlNTRjMDg0MmQ4MzA4YSIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMjItMDItMTZUMTI6MzI6MDJaIiwgR29WZXJzaW9uOiJnbzEuMTcuNyIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg== [following]
    worker-2: --2022-03-09 15:39:26--  https://cloud.weave.works/k8s/v1.16/net.yaml?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIyMyIsIEdpdFZlcnNpb246InYxLjIzLjQiLCBHaXRDb21taXQ6ImU2YzA5M2Q4N2VhNGNiYjUzMGE3YjJhZTkxZTU0YzA4NDJkODMwOGEiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDIyLTAyLTE2VDEyOjM4OjA1WiIsIEdvVmVyc2lvbjoiZ28xLjE3LjciLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjIzIiwgR2l0VmVyc2lvbjoidjEuMjMuNCIsIEdpdENvbW1pdDoiZTZjMDkzZDg3ZWE0Y2JiNTMwYTdiMmFlOTFlNTRjMDg0MmQ4MzA4YSIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMjItMDItMTZUMTI6MzI6MDJaIiwgR29WZXJzaW9uOiJnbzEuMTcuNyIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg==
    worker-2: Reusing existing connection to cloud.weave.works:443.
    worker-2: HTTP request sent, awaiting response... 200 OK
    worker-2: Length: 11705 (11K) [application/x-yaml]
    worker-2: Saving to: ‘weave-on-pods.yaml’
    worker-2: 
    worker-2:      0K .......... .                                          100% 45.0M=0s
    worker-2: 
    worker-2: 2022-03-09 15:39:26 (45.0 MB/s) - ‘weave-on-pods.yaml’ saved [11705/11705]
    worker-2: 
    worker-2: serviceaccount/weave-net configured
    worker-2: clusterrole.rbac.authorization.k8s.io/weave-net configured
    worker-2: clusterrolebinding.rbac.authorization.k8s.io/weave-net configured
    worker-2: role.rbac.authorization.k8s.io/weave-net configured
    worker-2: rolebinding.rbac.authorization.k8s.io/weave-net configured
    worker-2: daemonset.apps/weave-net configured
==> worker-2: Running provisioner: coredns_deploy (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-gecuar.sh
    worker-2: serviceaccount/coredns created
    worker-2: clusterrole.rbac.authorization.k8s.io/system:coredns created
    worker-2: clusterrolebinding.rbac.authorization.k8s.io/system:coredns created
    worker-2: configmap/coredns created
    worker-2: deployment.apps/coredns created
    worker-2: service/kube-dns created
==> worker-2: Running provisioner: kubelet_auth (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-1b91xjr.sh
    worker-2: clusterrole.rbac.authorization.k8s.io/system:kube-apiserver-to-kubelet unchanged
    worker-2: clusterrolebinding.rbac.authorization.k8s.io/system:kube-apiserver unchanged
==> worker-2: Running provisioner: smoke_tests (shell)...
    worker-2: Running: C:/Users/MARCIN~1/AppData/Local/Temp/vagrant-shell20220309-21684-qufgye.sh
    worker-2: ++++++++++++++++++++++++++++++++++++++++++++++
    worker-2: 
    worker-2: Starting SMOKE TESTS of your k8s cluster ....
    worker-2: 
    worker-2: Run busybox container
    worker-2: pod/busybox created
    worker-2: 
    worker-2: Waiting for the running busybox container (timeout 120s)...
    worker-2: pod/busybox condition met
    worker-2: 
    worker-2: NAME      READY   STATUS    RESTARTS   AGE
    worker-2: busybox   1/1     Running   0          17s
    worker-2: 
    worker-2: Execute nslookup command inside the pod
    worker-2: Server:    10.96.0.10
    worker-2: Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local
    worker-2: 
    worker-2: Name:      kubernetes
    worker-2: Address 1: 10.96.0.1 kubernetes.default.svc.cluster.local
    worker-2: 
    worker-2: Create deployment
    worker-2: deployment.apps/nginx created
    worker-2: 
    worker-2: Waiting for the nginx deployment to be available (timeout 120s) ...
    worker-2: deployment.apps/nginx condition met
    worker-2: 
    worker-2: NAME                     READY   STATUS    RESTARTS   AGE
    worker-2: nginx-85b98978db-hx968   1/1     Running   0          24s
    worker-2: 
    worker-2: Create a service by exposing pod port
    worker-2: service/nginx exposed
    worker-2: 
    worker-2: Port number = 30781
    worker-2: sleep 5
    worker-2: 
    worker-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-2:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   615  100   615    0     0  18088      0 --:--:-- --:--:-- --:--:-- 18088
    worker-2: <title>Welcome to nginx!</title>
    worker-2: <h1>Welcome to nginx!</h1>
    worker-2: 
    worker-2:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
    worker-2:                                  Dload  Upload   Total   Spent    Left  Speed
    worker-2:   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   615  100   615    0     0  68333      0 --:--:-- --:--:-- --:--:-- 68333
    worker-2: <title>Welcome to nginx!</title>
    worker-2: <h1>Welcome to nginx!</h1>
    worker-2: 
    worker-2: Pod name = nginx-85b98978db-hx968
    worker-2: 10.32.0.1 - - [09/Mar/2022:15:40:17 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.58.0" "-"
    worker-2: 10.44.0.0 - - [09/Mar/2022:15:40:17 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.58.0" "-"
    worker-2: 
    worker-2: Deleting created objects...
    worker-2: service "nginx" deleted
    worker-2: deployment.apps "nginx" deleted
    worker-2: pod "busybox" deleted
    worker-2: 
    worker-2: SMOKE TESTS completed!
    worker-2: Please review the log above. It should not contain any error messages.
    worker-2: 
    worker-2: ++++++++++++++++++++++++++++++++++++++++++++++
